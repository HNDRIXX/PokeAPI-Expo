a658b5f7c08783aad10b9e7ff2eb338c
"use strict";

exports.__esModule = true;
exports.atomic = atomic;
exports.classic = classic;
exports.inline = inline;
exports.stringifyValueWithProperty = stringifyValueWithProperty;
var _createReactDOMStyle = _interopRequireDefault(require("./createReactDOMStyle"));
var _hash = _interopRequireDefault(require("../../vendor/hash"));
var _hyphenateStyleName = _interopRequireDefault(require("hyphenate-style-name"));
var _normalizeValueWithProperty = _interopRequireDefault(require("./normalizeValueWithProperty"));
var _prefixStyles = _interopRequireWildcard(require("../../modules/prefixStyles"));
function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();
  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };
  return cache;
}
function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }
  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }
  var cache = _getRequireWildcardCache();
  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }
  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }
  newObj.default = obj;
  if (cache) {
    cache.set(obj, newObj);
  }
  return newObj;
}
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
function ownKeys(object, enumerableOnly) {
  var keys = Object.keys(object);
  if (Object.getOwnPropertySymbols) {
    var symbols = Object.getOwnPropertySymbols(object);
    if (enumerableOnly) symbols = symbols.filter(function (sym) {
      return Object.getOwnPropertyDescriptor(object, sym).enumerable;
    });
    keys.push.apply(keys, symbols);
  }
  return keys;
}
function _objectSpread(target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i] != null ? arguments[i] : {};
    if (i % 2) {
      ownKeys(Object(source), true).forEach(function (key) {
        _defineProperty(target, key, source[key]);
      });
    } else if (Object.getOwnPropertyDescriptors) {
      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
    } else {
      ownKeys(Object(source)).forEach(function (key) {
        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));
      });
    }
  }
  return target;
}
function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }
  return obj;
}
function _objectWithoutPropertiesLoose(source, excluded) {
  if (source == null) return {};
  var target = {};
  var sourceKeys = Object.keys(source);
  var key, i;
  for (i = 0; i < sourceKeys.length; i++) {
    key = sourceKeys[i];
    if (excluded.indexOf(key) >= 0) continue;
    target[key] = source[key];
  }
  return target;
}
var cache = {
  get: function get(property, value) {
    if (cache[property] != null && cache[property].hasOwnProperty(value) && cache[property][value] != null) {
      return cache[property][value];
    }
  },
  set: function set(property, value, object) {
    if (cache[property] == null) {
      cache[property] = {};
    }
    return cache[property][value] = object;
  }
};
function atomic(style) {
  return Object.keys(style).sort().reduce(function (acc, property) {
    var value = style[property];
    if (value != null) {
      var valueString = stringifyValueWithProperty(value, property);
      var cachedResult = cache.get(property, valueString);
      if (cachedResult != null) {
        var identifier = cachedResult.identifier;
        acc[identifier] = cachedResult;
      } else {
        var _identifier = createIdentifier('r', property, value);
        var rules = createAtomicRules(_identifier, property, value);
        var _cachedResult = cache.set(property, valueString, {
          property: property,
          value: stringifyValueWithProperty(value, property),
          identifier: _identifier,
          rules: rules
        });
        acc[_identifier] = _cachedResult;
      }
    }
    return acc;
  }, {});
}
function classic(style, name) {
  var _ref;
  var identifier = createIdentifier('css', name, style);
  var animationKeyframes = style.animationKeyframes,
    rest = _objectWithoutPropertiesLoose(style, ["animationKeyframes"]);
  var rules = [];
  var selector = "." + identifier;
  var animationName;
  if (animationKeyframes != null) {
    var _processKeyframesValu = processKeyframesValue(animationKeyframes),
      animationNames = _processKeyframesValu.animationNames,
      keyframesRules = _processKeyframesValu.rules;
    animationName = animationNames.join(',');
    rules.push.apply(rules, keyframesRules);
  }
  var block = createDeclarationBlock(_objectSpread(_objectSpread({}, rest), {}, {
    animationName: animationName
  }));
  rules.push("" + selector + block);
  return _ref = {}, _ref[identifier] = {
    identifier: identifier,
    rules: rules
  }, _ref;
}
function inline(style) {
  return (0, _prefixStyles.prefixInlineStyles)((0, _createReactDOMStyle.default)(style));
}
function stringifyValueWithProperty(value, property) {
  var normalizedValue = (0, _normalizeValueWithProperty.default)(value, property);
  return typeof normalizedValue !== 'string' ? JSON.stringify(normalizedValue || '') : normalizedValue;
}
function createAtomicRules(identifier, property, value) {
  var rules = [];
  var selector = "." + identifier;
  switch (property) {
    case 'animationKeyframes':
      {
        var _processKeyframesValu2 = processKeyframesValue(value),
          animationNames = _processKeyframesValu2.animationNames,
          keyframesRules = _processKeyframesValu2.rules;
        var block = createDeclarationBlock({
          animationName: animationNames.join(',')
        });
        rules.push.apply(rules, ["" + selector + block].concat(keyframesRules));
        break;
      }
    case 'placeholderTextColor':
      {
        var _block = createDeclarationBlock({
          color: value,
          opacity: 1
        });
        rules.push(selector + "::-webkit-input-placeholder" + _block, selector + "::-moz-placeholder" + _block, selector + ":-ms-input-placeholder" + _block, selector + "::placeholder" + _block);
        break;
      }
    case 'pointerEvents':
      {
        var finalValue = value;
        if (value === 'auto' || value === 'box-only') {
          finalValue = 'auto!important';
          if (value === 'box-only') {
            var _block3 = createDeclarationBlock({
              pointerEvents: 'none'
            });
            rules.push(selector + ">*" + _block3);
          }
        } else if (value === 'none' || value === 'box-none') {
          finalValue = 'none!important';
          if (value === 'box-none') {
            var _block4 = createDeclarationBlock({
              pointerEvents: 'auto'
            });
            rules.push(selector + ">*" + _block4);
          }
        }
        var _block2 = createDeclarationBlock({
          pointerEvents: finalValue
        });
        rules.push("" + selector + _block2);
        break;
      }
    case 'scrollbarWidth':
      {
        if (value === 'none') {
          rules.push(selector + "::-webkit-scrollbar{display:none}");
        }
        var _block5 = createDeclarationBlock({
          scrollbarWidth: value
        });
        rules.push("" + selector + _block5);
        break;
      }
    default:
      {
        var _createDeclarationBlo;
        var _block6 = createDeclarationBlock((_createDeclarationBlo = {}, _createDeclarationBlo[property] = value, _createDeclarationBlo));
        rules.push("" + selector + _block6);
        break;
      }
  }
  return rules;
}
function createDeclarationBlock(style) {
  var domStyle = (0, _prefixStyles.default)((0, _createReactDOMStyle.default)(style));
  var declarationsString = Object.keys(domStyle).map(function (property) {
    var value = domStyle[property];
    var prop = (0, _hyphenateStyleName.default)(property);
    if (Array.isArray(value)) {
      return value.map(function (v) {
        return prop + ":" + v;
      }).join(';');
    } else {
      return prop + ":" + value;
    }
  }).sort().join(';');
  return "{" + declarationsString + ";}";
}
function createIdentifier(prefix, name, value) {
  var hashedString = (0, _hash.default)(name + stringifyValueWithProperty(value, name));
  return process.env.NODE_ENV !== 'production' ? prefix + "-" + name + "-" + hashedString : prefix + "-" + hashedString;
}
function createKeyframes(keyframes) {
  var prefixes = ['-webkit-', ''];
  var identifier = createIdentifier('r', 'animation', keyframes);
  var steps = '{' + Object.keys(keyframes).map(function (stepName) {
    var rule = keyframes[stepName];
    var block = createDeclarationBlock(rule);
    return "" + stepName + block;
  }).join('') + '}';
  var rules = prefixes.map(function (prefix) {
    return "@" + prefix + "keyframes " + identifier + steps;
  });
  return {
    identifier: identifier,
    rules: rules
  };
}
function processKeyframesValue(keyframesValue) {
  if (typeof keyframesValue === 'number') {
    throw new Error("Invalid CSS keyframes type: " + typeof keyframesValue);
  }
  var animationNames = [];
  var rules = [];
  var value = Array.isArray(keyframesValue) ? keyframesValue : [keyframesValue];
  value.forEach(function (keyframes) {
    if (typeof keyframes === 'string') {
      animationNames.push(keyframes);
    } else {
      var _createKeyframes = createKeyframes(keyframes),
        identifier = _createKeyframes.identifier,
        keyframesRules = _createKeyframes.rules;
      animationNames.push(identifier);
      rules.push.apply(rules, keyframesRules);
    }
  });
  return {
    animationNames: animationNames,
    rules: rules
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiX19lc01vZHVsZSIsImF0b21pYyIsImNsYXNzaWMiLCJpbmxpbmUiLCJzdHJpbmdpZnlWYWx1ZVdpdGhQcm9wZXJ0eSIsIl9jcmVhdGVSZWFjdERPTVN0eWxlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaGFzaCIsIl9oeXBoZW5hdGVTdHlsZU5hbWUiLCJfbm9ybWFsaXplVmFsdWVXaXRoUHJvcGVydHkiLCJfcHJlZml4U3R5bGVzIiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJXZWFrTWFwIiwiY2FjaGUiLCJvYmoiLCJkZWZhdWx0IiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0Iiwib3duS2V5cyIsIm9iamVjdCIsImVudW1lcmFibGVPbmx5Iiwia2V5cyIsImdldE93blByb3BlcnR5U3ltYm9scyIsInN5bWJvbHMiLCJmaWx0ZXIiLCJzeW0iLCJlbnVtZXJhYmxlIiwicHVzaCIsImFwcGx5IiwiX29iamVjdFNwcmVhZCIsInRhcmdldCIsImkiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJ2YWx1ZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJleGNsdWRlZCIsInNvdXJjZUtleXMiLCJpbmRleE9mIiwicHJvcGVydHkiLCJzdHlsZSIsInNvcnQiLCJyZWR1Y2UiLCJhY2MiLCJ2YWx1ZVN0cmluZyIsImNhY2hlZFJlc3VsdCIsImlkZW50aWZpZXIiLCJfaWRlbnRpZmllciIsImNyZWF0ZUlkZW50aWZpZXIiLCJydWxlcyIsImNyZWF0ZUF0b21pY1J1bGVzIiwiX2NhY2hlZFJlc3VsdCIsIm5hbWUiLCJfcmVmIiwiYW5pbWF0aW9uS2V5ZnJhbWVzIiwicmVzdCIsInNlbGVjdG9yIiwiYW5pbWF0aW9uTmFtZSIsIl9wcm9jZXNzS2V5ZnJhbWVzVmFsdSIsInByb2Nlc3NLZXlmcmFtZXNWYWx1ZSIsImFuaW1hdGlvbk5hbWVzIiwia2V5ZnJhbWVzUnVsZXMiLCJqb2luIiwiYmxvY2siLCJjcmVhdGVEZWNsYXJhdGlvbkJsb2NrIiwicHJlZml4SW5saW5lU3R5bGVzIiwibm9ybWFsaXplZFZhbHVlIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9wcm9jZXNzS2V5ZnJhbWVzVmFsdTIiLCJjb25jYXQiLCJfYmxvY2siLCJjb2xvciIsIm9wYWNpdHkiLCJmaW5hbFZhbHVlIiwiX2Jsb2NrMyIsInBvaW50ZXJFdmVudHMiLCJfYmxvY2s0IiwiX2Jsb2NrMiIsIl9ibG9jazUiLCJzY3JvbGxiYXJXaWR0aCIsIl9jcmVhdGVEZWNsYXJhdGlvbkJsbyIsIl9ibG9jazYiLCJkb21TdHlsZSIsImRlY2xhcmF0aW9uc1N0cmluZyIsIm1hcCIsInByb3AiLCJBcnJheSIsImlzQXJyYXkiLCJ2IiwicHJlZml4IiwiaGFzaGVkU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiY3JlYXRlS2V5ZnJhbWVzIiwia2V5ZnJhbWVzIiwicHJlZml4ZXMiLCJzdGVwcyIsInN0ZXBOYW1lIiwicnVsZSIsImtleWZyYW1lc1ZhbHVlIiwiRXJyb3IiLCJfY3JlYXRlS2V5ZnJhbWVzIl0sInNvdXJjZXMiOlsiY29tcGlsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuYXRvbWljID0gYXRvbWljO1xuZXhwb3J0cy5jbGFzc2ljID0gY2xhc3NpYztcbmV4cG9ydHMuaW5saW5lID0gaW5saW5lO1xuZXhwb3J0cy5zdHJpbmdpZnlWYWx1ZVdpdGhQcm9wZXJ0eSA9IHN0cmluZ2lmeVZhbHVlV2l0aFByb3BlcnR5O1xuXG52YXIgX2NyZWF0ZVJlYWN0RE9NU3R5bGUgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL2NyZWF0ZVJlYWN0RE9NU3R5bGVcIikpO1xuXG52YXIgX2hhc2ggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi8uLi92ZW5kb3IvaGFzaFwiKSk7XG5cbnZhciBfaHlwaGVuYXRlU3R5bGVOYW1lID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiaHlwaGVuYXRlLXN0eWxlLW5hbWVcIikpO1xuXG52YXIgX25vcm1hbGl6ZVZhbHVlV2l0aFByb3BlcnR5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ub3JtYWxpemVWYWx1ZVdpdGhQcm9wZXJ0eVwiKSk7XG5cbnZhciBfcHJlZml4U3R5bGVzID0gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQocmVxdWlyZShcIi4uLy4uL21vZHVsZXMvcHJlZml4U3R5bGVzXCIpKTtcblxuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKCkgeyBpZiAodHlwZW9mIFdlYWtNYXAgIT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIG51bGw7IHZhciBjYWNoZSA9IG5ldyBXZWFrTWFwKCk7IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgcmV0dXJuIGNhY2hlOyB9OyByZXR1cm4gY2FjaGU7IH1cblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqKSB7IGlmIChvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iaiAhPT0gXCJmdW5jdGlvblwiKSB7IHJldHVybiB7IGRlZmF1bHQ6IG9iaiB9OyB9IHZhciBjYWNoZSA9IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpOyBpZiAoY2FjaGUgJiYgY2FjaGUuaGFzKG9iaikpIHsgcmV0dXJuIGNhY2hlLmdldChvYmopOyB9IHZhciBuZXdPYmogPSB7fTsgdmFyIGhhc1Byb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSAmJiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOyBmb3IgKHZhciBrZXkgaW4gb2JqKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gaGFzUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsOyBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyBpZiAoY2FjaGUpIHsgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTsgfSByZXR1cm4gbmV3T2JqOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbnZhciBjYWNoZSA9IHtcbiAgZ2V0OiBmdW5jdGlvbiBnZXQocHJvcGVydHksIHZhbHVlKSB7XG4gICAgaWYgKGNhY2hlW3Byb3BlcnR5XSAhPSBudWxsICYmIGNhY2hlW3Byb3BlcnR5XS5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkgJiYgY2FjaGVbcHJvcGVydHldW3ZhbHVlXSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gY2FjaGVbcHJvcGVydHldW3ZhbHVlXTtcbiAgICB9XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gc2V0KHByb3BlcnR5LCB2YWx1ZSwgb2JqZWN0KSB7XG4gICAgaWYgKGNhY2hlW3Byb3BlcnR5XSA9PSBudWxsKSB7XG4gICAgICBjYWNoZVtwcm9wZXJ0eV0gPSB7fTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FjaGVbcHJvcGVydHldW3ZhbHVlXSA9IG9iamVjdDtcbiAgfVxufTtcbi8qKlxuICogQ29tcGlsZSBzdHlsZSB0byBhdG9taWMgQ1NTIHJ1bGVzLlxuICovXG5cbmZ1bmN0aW9uIGF0b21pYyhzdHlsZSkge1xuICByZXR1cm4gT2JqZWN0LmtleXMoc3R5bGUpLnNvcnQoKS5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgcHJvcGVydHkpIHtcbiAgICB2YXIgdmFsdWUgPSBzdHlsZVtwcm9wZXJ0eV07XG5cbiAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgdmFyIHZhbHVlU3RyaW5nID0gc3RyaW5naWZ5VmFsdWVXaXRoUHJvcGVydHkodmFsdWUsIHByb3BlcnR5KTtcbiAgICAgIHZhciBjYWNoZWRSZXN1bHQgPSBjYWNoZS5nZXQocHJvcGVydHksIHZhbHVlU3RyaW5nKTtcblxuICAgICAgaWYgKGNhY2hlZFJlc3VsdCAhPSBudWxsKSB7XG4gICAgICAgIHZhciBpZGVudGlmaWVyID0gY2FjaGVkUmVzdWx0LmlkZW50aWZpZXI7XG4gICAgICAgIGFjY1tpZGVudGlmaWVyXSA9IGNhY2hlZFJlc3VsdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBfaWRlbnRpZmllciA9IGNyZWF0ZUlkZW50aWZpZXIoJ3InLCBwcm9wZXJ0eSwgdmFsdWUpO1xuXG4gICAgICAgIHZhciBydWxlcyA9IGNyZWF0ZUF0b21pY1J1bGVzKF9pZGVudGlmaWVyLCBwcm9wZXJ0eSwgdmFsdWUpO1xuXG4gICAgICAgIHZhciBfY2FjaGVkUmVzdWx0ID0gY2FjaGUuc2V0KHByb3BlcnR5LCB2YWx1ZVN0cmluZywge1xuICAgICAgICAgIHByb3BlcnR5OiBwcm9wZXJ0eSxcbiAgICAgICAgICB2YWx1ZTogc3RyaW5naWZ5VmFsdWVXaXRoUHJvcGVydHkodmFsdWUsIHByb3BlcnR5KSxcbiAgICAgICAgICBpZGVudGlmaWVyOiBfaWRlbnRpZmllcixcbiAgICAgICAgICBydWxlczogcnVsZXNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYWNjW19pZGVudGlmaWVyXSA9IF9jYWNoZWRSZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFjYztcbiAgfSwge30pO1xufVxuLyoqXG4gKiBDb21waWxlIHNpbXBsZSBzdHlsZSBvYmplY3QgdG8gY2xhc3NpYyBDU1MgcnVsZXMuXG4gKiBObyBzdXBwb3J0IGZvciAncGxhY2Vob2xkZXJUZXh0Q29sb3InLCAnc2Nyb2xsYmFyV2lkdGgnLCBvciAncG9pbnRlckV2ZW50cycuXG4gKi9cblxuXG5mdW5jdGlvbiBjbGFzc2ljKHN0eWxlLCBuYW1lKSB7XG4gIHZhciBfcmVmO1xuXG4gIHZhciBpZGVudGlmaWVyID0gY3JlYXRlSWRlbnRpZmllcignY3NzJywgbmFtZSwgc3R5bGUpO1xuXG4gIHZhciBhbmltYXRpb25LZXlmcmFtZXMgPSBzdHlsZS5hbmltYXRpb25LZXlmcmFtZXMsXG4gICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc3R5bGUsIFtcImFuaW1hdGlvbktleWZyYW1lc1wiXSk7XG5cbiAgdmFyIHJ1bGVzID0gW107XG4gIHZhciBzZWxlY3RvciA9IFwiLlwiICsgaWRlbnRpZmllcjtcbiAgdmFyIGFuaW1hdGlvbk5hbWU7XG5cbiAgaWYgKGFuaW1hdGlvbktleWZyYW1lcyAhPSBudWxsKSB7XG4gICAgdmFyIF9wcm9jZXNzS2V5ZnJhbWVzVmFsdSA9IHByb2Nlc3NLZXlmcmFtZXNWYWx1ZShhbmltYXRpb25LZXlmcmFtZXMpLFxuICAgICAgICBhbmltYXRpb25OYW1lcyA9IF9wcm9jZXNzS2V5ZnJhbWVzVmFsdS5hbmltYXRpb25OYW1lcyxcbiAgICAgICAga2V5ZnJhbWVzUnVsZXMgPSBfcHJvY2Vzc0tleWZyYW1lc1ZhbHUucnVsZXM7XG5cbiAgICBhbmltYXRpb25OYW1lID0gYW5pbWF0aW9uTmFtZXMuam9pbignLCcpO1xuICAgIHJ1bGVzLnB1c2guYXBwbHkocnVsZXMsIGtleWZyYW1lc1J1bGVzKTtcbiAgfVxuXG4gIHZhciBibG9jayA9IGNyZWF0ZURlY2xhcmF0aW9uQmxvY2soX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCByZXN0KSwge30sIHtcbiAgICBhbmltYXRpb25OYW1lOiBhbmltYXRpb25OYW1lXG4gIH0pKTtcbiAgcnVsZXMucHVzaChcIlwiICsgc2VsZWN0b3IgKyBibG9jayk7XG4gIHJldHVybiBfcmVmID0ge30sIF9yZWZbaWRlbnRpZmllcl0gPSB7XG4gICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICBydWxlczogcnVsZXNcbiAgfSwgX3JlZjtcbn1cbi8qKlxuICogQ29tcGlsZSBzaW1wbGUgc3R5bGUgb2JqZWN0IHRvIGlubGluZSBET00gc3R5bGVzLlxuICogTm8gc3VwcG9ydCBmb3IgJ2FuaW1hdGlvbktleWZyYW1lcycsICdwbGFjZWhvbGRlclRleHRDb2xvcicsICdzY3JvbGxiYXJXaWR0aCcsIG9yICdwb2ludGVyRXZlbnRzJy5cbiAqL1xuXG5cbmZ1bmN0aW9uIGlubGluZShzdHlsZSkge1xuICByZXR1cm4gKDAsIF9wcmVmaXhTdHlsZXMucHJlZml4SW5saW5lU3R5bGVzKSgoMCwgX2NyZWF0ZVJlYWN0RE9NU3R5bGUuZGVmYXVsdCkoc3R5bGUpKTtcbn1cbi8qKlxuICogQ3JlYXRlIGEgdmFsdWUgc3RyaW5nIHRoYXQgbm9ybWFsaXplcyBkaWZmZXJlbnQgaW5wdXQgdmFsdWVzIHdpdGggYSBjb21tb25cbiAqIG91dHB1dC5cbiAqL1xuXG5cbmZ1bmN0aW9uIHN0cmluZ2lmeVZhbHVlV2l0aFByb3BlcnR5KHZhbHVlLCBwcm9wZXJ0eSkge1xuICAvLyBlLmcuLCAwID0+ICcwcHgnLCAnYmxhY2snID0+ICdyZ2JhKDAsMCwwLDEpJ1xuICB2YXIgbm9ybWFsaXplZFZhbHVlID0gKDAsIF9ub3JtYWxpemVWYWx1ZVdpdGhQcm9wZXJ0eS5kZWZhdWx0KSh2YWx1ZSwgcHJvcGVydHkpO1xuICByZXR1cm4gdHlwZW9mIG5vcm1hbGl6ZWRWYWx1ZSAhPT0gJ3N0cmluZycgPyBKU09OLnN0cmluZ2lmeShub3JtYWxpemVkVmFsdWUgfHwgJycpIDogbm9ybWFsaXplZFZhbHVlO1xufVxuLyoqXG4gKiBDcmVhdGUgdGhlIEF0b21pYyBDU1MgcnVsZXMgbmVlZGVkIGZvciBhIGdpdmVuIFN0eWxlU2hlZXQgcnVsZS5cbiAqIFRyYW5zbGF0ZXMgU3R5bGVTaGVldCBkZWNsYXJhdGlvbnMgdG8gQ1NTLlxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlQXRvbWljUnVsZXMoaWRlbnRpZmllciwgcHJvcGVydHksIHZhbHVlKSB7XG4gIHZhciBydWxlcyA9IFtdO1xuICB2YXIgc2VsZWN0b3IgPSBcIi5cIiArIGlkZW50aWZpZXI7IC8vIEhhbmRsZSBub24tc3RhbmRhcmQgcHJvcGVydGllcyBhbmQgb2JqZWN0IHZhbHVlcyB0aGF0IHJlcXVpcmUgbXVsdGlwbGVcbiAgLy8gQ1NTIHJ1bGVzIHRvIGJlIGNyZWF0ZWQuXG5cbiAgc3dpdGNoIChwcm9wZXJ0eSkge1xuICAgIGNhc2UgJ2FuaW1hdGlvbktleWZyYW1lcyc6XG4gICAgICB7XG4gICAgICAgIHZhciBfcHJvY2Vzc0tleWZyYW1lc1ZhbHUyID0gcHJvY2Vzc0tleWZyYW1lc1ZhbHVlKHZhbHVlKSxcbiAgICAgICAgICAgIGFuaW1hdGlvbk5hbWVzID0gX3Byb2Nlc3NLZXlmcmFtZXNWYWx1Mi5hbmltYXRpb25OYW1lcyxcbiAgICAgICAgICAgIGtleWZyYW1lc1J1bGVzID0gX3Byb2Nlc3NLZXlmcmFtZXNWYWx1Mi5ydWxlcztcblxuICAgICAgICB2YXIgYmxvY2sgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKHtcbiAgICAgICAgICBhbmltYXRpb25OYW1lOiBhbmltYXRpb25OYW1lcy5qb2luKCcsJylcbiAgICAgICAgfSk7XG4gICAgICAgIHJ1bGVzLnB1c2guYXBwbHkocnVsZXMsIFtcIlwiICsgc2VsZWN0b3IgKyBibG9ja10uY29uY2F0KGtleWZyYW1lc1J1bGVzKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIC8vIEVxdWl2YWxlbnQgdG8gdXNpbmcgJzo6cGxhY2Vob2xkZXInXG5cbiAgICBjYXNlICdwbGFjZWhvbGRlclRleHRDb2xvcic6XG4gICAgICB7XG4gICAgICAgIHZhciBfYmxvY2sgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKHtcbiAgICAgICAgICBjb2xvcjogdmFsdWUsXG4gICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICB9KTtcblxuICAgICAgICBydWxlcy5wdXNoKHNlbGVjdG9yICsgXCI6Oi13ZWJraXQtaW5wdXQtcGxhY2Vob2xkZXJcIiArIF9ibG9jaywgc2VsZWN0b3IgKyBcIjo6LW1vei1wbGFjZWhvbGRlclwiICsgX2Jsb2NrLCBzZWxlY3RvciArIFwiOi1tcy1pbnB1dC1wbGFjZWhvbGRlclwiICsgX2Jsb2NrLCBzZWxlY3RvciArIFwiOjpwbGFjZWhvbGRlclwiICsgX2Jsb2NrKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgLy8gUG9seWZpbGwgZm9yIGFkZGl0aW9uYWwgJ3BvaW50ZXItZXZlbnRzJyB2YWx1ZXNcbiAgICAvLyBTZWUgZDEzZjc4NjIyYjIzM2EwYWZjMGM3YTIwMGMwYTA3OTJjOGNhOWU1OFxuXG4gICAgY2FzZSAncG9pbnRlckV2ZW50cyc6XG4gICAgICB7XG4gICAgICAgIHZhciBmaW5hbFZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSAnYXV0bycgfHwgdmFsdWUgPT09ICdib3gtb25seScpIHtcbiAgICAgICAgICBmaW5hbFZhbHVlID0gJ2F1dG8haW1wb3J0YW50JztcblxuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gJ2JveC1vbmx5Jykge1xuICAgICAgICAgICAgdmFyIF9ibG9jazMgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKHtcbiAgICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcnVsZXMucHVzaChzZWxlY3RvciArIFwiPipcIiArIF9ibG9jazMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ25vbmUnIHx8IHZhbHVlID09PSAnYm94LW5vbmUnKSB7XG4gICAgICAgICAgZmluYWxWYWx1ZSA9ICdub25lIWltcG9ydGFudCc7XG5cbiAgICAgICAgICBpZiAodmFsdWUgPT09ICdib3gtbm9uZScpIHtcbiAgICAgICAgICAgIHZhciBfYmxvY2s0ID0gY3JlYXRlRGVjbGFyYXRpb25CbG9jayh7XG4gICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdhdXRvJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJ1bGVzLnB1c2goc2VsZWN0b3IgKyBcIj4qXCIgKyBfYmxvY2s0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2Jsb2NrMiA9IGNyZWF0ZURlY2xhcmF0aW9uQmxvY2soe1xuICAgICAgICAgIHBvaW50ZXJFdmVudHM6IGZpbmFsVmFsdWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcnVsZXMucHVzaChcIlwiICsgc2VsZWN0b3IgKyBfYmxvY2syKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgLy8gUG9seWZpbGwgZm9yIGRyYWZ0IHNwZWNcbiAgICAvLyBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3NzLXNjcm9sbGJhcnMtMS9cblxuICAgIGNhc2UgJ3Njcm9sbGJhcldpZHRoJzpcbiAgICAgIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAnbm9uZScpIHtcbiAgICAgICAgICBydWxlcy5wdXNoKHNlbGVjdG9yICsgXCI6Oi13ZWJraXQtc2Nyb2xsYmFye2Rpc3BsYXk6bm9uZX1cIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgX2Jsb2NrNSA9IGNyZWF0ZURlY2xhcmF0aW9uQmxvY2soe1xuICAgICAgICAgIHNjcm9sbGJhcldpZHRoOiB2YWx1ZVxuICAgICAgICB9KTtcblxuICAgICAgICBydWxlcy5wdXNoKFwiXCIgKyBzZWxlY3RvciArIF9ibG9jazUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIGRlZmF1bHQ6XG4gICAgICB7XG4gICAgICAgIHZhciBfY3JlYXRlRGVjbGFyYXRpb25CbG87XG5cbiAgICAgICAgdmFyIF9ibG9jazYgPSBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKChfY3JlYXRlRGVjbGFyYXRpb25CbG8gPSB7fSwgX2NyZWF0ZURlY2xhcmF0aW9uQmxvW3Byb3BlcnR5XSA9IHZhbHVlLCBfY3JlYXRlRGVjbGFyYXRpb25CbG8pKTtcblxuICAgICAgICBydWxlcy5wdXNoKFwiXCIgKyBzZWxlY3RvciArIF9ibG9jazYpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgfVxuXG4gIHJldHVybiBydWxlcztcbn1cbi8qKlxuICogQ3JlYXRlcyBhIENTUyBkZWNsYXJhdGlvbiBibG9jayBmcm9tIGEgU3R5bGVTaGVldCBvYmplY3QuXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVEZWNsYXJhdGlvbkJsb2NrKHN0eWxlKSB7XG4gIHZhciBkb21TdHlsZSA9ICgwLCBfcHJlZml4U3R5bGVzLmRlZmF1bHQpKCgwLCBfY3JlYXRlUmVhY3RET01TdHlsZS5kZWZhdWx0KShzdHlsZSkpO1xuICB2YXIgZGVjbGFyYXRpb25zU3RyaW5nID0gT2JqZWN0LmtleXMoZG9tU3R5bGUpLm1hcChmdW5jdGlvbiAocHJvcGVydHkpIHtcbiAgICB2YXIgdmFsdWUgPSBkb21TdHlsZVtwcm9wZXJ0eV07XG4gICAgdmFyIHByb3AgPSAoMCwgX2h5cGhlbmF0ZVN0eWxlTmFtZS5kZWZhdWx0KShwcm9wZXJ0eSk7IC8vIFRoZSBwcmVmaXhlciBtYXkgcmV0dXJuIGFuIGFycmF5IG9mIHZhbHVlczpcbiAgICAvLyB7IGRpc3BsYXk6IFsgJy13ZWJraXQtZmxleCcsICdmbGV4JyBdIH1cbiAgICAvLyB0byByZXByZXNlbnQgXCJmYWxsYmFja1wiIGRlY2xhcmF0aW9uc1xuICAgIC8vIHsgZGlzcGxheTogLXdlYmtpdC1mbGV4OyBkaXNwbGF5OiBmbGV4OyB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5tYXAoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHByb3AgKyBcIjpcIiArIHY7XG4gICAgICB9KS5qb2luKCc7Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBwcm9wICsgXCI6XCIgKyB2YWx1ZTtcbiAgICB9XG4gIH0pIC8vIE9uY2UgcHJvcGVydGllcyBhcmUgaHlwaGVuYXRlZCwgdGhpcyB3aWxsIHB1dCB0aGUgdmVuZG9yXG4gIC8vIHByZWZpeGVkIGFuZCBzaG9ydC1mb3JtIHByb3BlcnRpZXMgZmlyc3QgaW4gdGhlIGxpc3QuXG4gIC5zb3J0KCkuam9pbignOycpO1xuICByZXR1cm4gXCJ7XCIgKyBkZWNsYXJhdGlvbnNTdHJpbmcgKyBcIjt9XCI7XG59XG4vKipcbiAqIEFuIGlkZW50aWZpZXIgaXMgYXNzb2NpYXRlZCB3aXRoIGEgdW5pcXVlIHNldCBvZiBzdHlsZXMuXG4gKi9cblxuXG5mdW5jdGlvbiBjcmVhdGVJZGVudGlmaWVyKHByZWZpeCwgbmFtZSwgdmFsdWUpIHtcbiAgdmFyIGhhc2hlZFN0cmluZyA9ICgwLCBfaGFzaC5kZWZhdWx0KShuYW1lICsgc3RyaW5naWZ5VmFsdWVXaXRoUHJvcGVydHkodmFsdWUsIG5hbWUpKTtcbiAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgPyBwcmVmaXggKyBcIi1cIiArIG5hbWUgKyBcIi1cIiArIGhhc2hlZFN0cmluZyA6IHByZWZpeCArIFwiLVwiICsgaGFzaGVkU3RyaW5nO1xufVxuLyoqXG4gKiBDcmVhdGUgaW5kaXZpZHVhbCBDU1Mga2V5ZnJhbWVzIHJ1bGVzLlxuICovXG5cblxuZnVuY3Rpb24gY3JlYXRlS2V5ZnJhbWVzKGtleWZyYW1lcykge1xuICB2YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJyddO1xuICB2YXIgaWRlbnRpZmllciA9IGNyZWF0ZUlkZW50aWZpZXIoJ3InLCAnYW5pbWF0aW9uJywga2V5ZnJhbWVzKTtcbiAgdmFyIHN0ZXBzID0gJ3snICsgT2JqZWN0LmtleXMoa2V5ZnJhbWVzKS5tYXAoZnVuY3Rpb24gKHN0ZXBOYW1lKSB7XG4gICAgdmFyIHJ1bGUgPSBrZXlmcmFtZXNbc3RlcE5hbWVdO1xuICAgIHZhciBibG9jayA9IGNyZWF0ZURlY2xhcmF0aW9uQmxvY2socnVsZSk7XG4gICAgcmV0dXJuIFwiXCIgKyBzdGVwTmFtZSArIGJsb2NrO1xuICB9KS5qb2luKCcnKSArICd9JztcbiAgdmFyIHJ1bGVzID0gcHJlZml4ZXMubWFwKGZ1bmN0aW9uIChwcmVmaXgpIHtcbiAgICByZXR1cm4gXCJAXCIgKyBwcmVmaXggKyBcImtleWZyYW1lcyBcIiArIGlkZW50aWZpZXIgKyBzdGVwcztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICBydWxlczogcnVsZXNcbiAgfTtcbn1cbi8qKlxuICogQ3JlYXRlIENTUyBrZXlmcmFtZXMgcnVsZXMgYW5kIG5hbWVzIGZyb20gYSBTdHlsZVNoZWV0IGtleWZyYW1lcyBvYmplY3QuXG4gKi9cblxuXG5mdW5jdGlvbiBwcm9jZXNzS2V5ZnJhbWVzVmFsdWUoa2V5ZnJhbWVzVmFsdWUpIHtcbiAgaWYgKHR5cGVvZiBrZXlmcmFtZXNWYWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENTUyBrZXlmcmFtZXMgdHlwZTogXCIgKyB0eXBlb2Yga2V5ZnJhbWVzVmFsdWUpO1xuICB9XG5cbiAgdmFyIGFuaW1hdGlvbk5hbWVzID0gW107XG4gIHZhciBydWxlcyA9IFtdO1xuICB2YXIgdmFsdWUgPSBBcnJheS5pc0FycmF5KGtleWZyYW1lc1ZhbHVlKSA/IGtleWZyYW1lc1ZhbHVlIDogW2tleWZyYW1lc1ZhbHVlXTtcbiAgdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAoa2V5ZnJhbWVzKSB7XG4gICAgaWYgKHR5cGVvZiBrZXlmcmFtZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBTdXBwb3J0IGV4dGVybmFsIGFuaW1hdGlvbiBsaWJyYXJpZXMgKGlkZW50aWZpZXJzIG9ubHkpXG4gICAgICBhbmltYXRpb25OYW1lcy5wdXNoKGtleWZyYW1lcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENyZWF0ZSBydWxlcyBmb3IgZWFjaCBvZiB0aGUga2V5ZnJhbWVzXG4gICAgICB2YXIgX2NyZWF0ZUtleWZyYW1lcyA9IGNyZWF0ZUtleWZyYW1lcyhrZXlmcmFtZXMpLFxuICAgICAgICAgIGlkZW50aWZpZXIgPSBfY3JlYXRlS2V5ZnJhbWVzLmlkZW50aWZpZXIsXG4gICAgICAgICAga2V5ZnJhbWVzUnVsZXMgPSBfY3JlYXRlS2V5ZnJhbWVzLnJ1bGVzO1xuXG4gICAgICBhbmltYXRpb25OYW1lcy5wdXNoKGlkZW50aWZpZXIpO1xuICAgICAgcnVsZXMucHVzaC5hcHBseShydWxlcywga2V5ZnJhbWVzUnVsZXMpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgYW5pbWF0aW9uTmFtZXM6IGFuaW1hdGlvbk5hbWVzLFxuICAgIHJ1bGVzOiBydWxlc1xuICB9O1xufSJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsT0FBTyxDQUFDQyxVQUFVLEdBQUcsSUFBSTtBQUN6QkQsT0FBTyxDQUFDRSxNQUFNLEdBQUdBLE1BQU07QUFDdkJGLE9BQU8sQ0FBQ0csT0FBTyxHQUFHQSxPQUFPO0FBQ3pCSCxPQUFPLENBQUNJLE1BQU0sR0FBR0EsTUFBTTtBQUN2QkosT0FBTyxDQUFDSywwQkFBMEIsR0FBR0EsMEJBQTBCO0FBRS9ELElBQUlDLG9CQUFvQixHQUFHQyxzQkFBc0IsQ0FBQ0MsT0FBTyx3QkFBd0IsQ0FBQyxDQUFDO0FBRW5GLElBQUlDLEtBQUssR0FBR0Ysc0JBQXNCLENBQUNDLE9BQU8sb0JBQW9CLENBQUMsQ0FBQztBQUVoRSxJQUFJRSxtQkFBbUIsR0FBR0gsc0JBQXNCLENBQUNDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBRWpGLElBQUlHLDJCQUEyQixHQUFHSixzQkFBc0IsQ0FBQ0MsT0FBTywrQkFBK0IsQ0FBQyxDQUFDO0FBRWpHLElBQUlJLGFBQWEsR0FBR0MsdUJBQXVCLENBQUNMLE9BQU8sNkJBQTZCLENBQUMsQ0FBQztBQUVsRixTQUFTTSx3QkFBd0JBLENBQUEsRUFBRztFQUFFLElBQUksT0FBT0MsT0FBTyxLQUFLLFVBQVUsRUFBRSxPQUFPLElBQUk7RUFBRSxJQUFJQyxLQUFLLEdBQUcsSUFBSUQsT0FB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