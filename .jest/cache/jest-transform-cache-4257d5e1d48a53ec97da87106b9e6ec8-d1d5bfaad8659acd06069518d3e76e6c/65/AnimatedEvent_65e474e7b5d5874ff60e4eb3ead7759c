3dc21b9b57042dd62a772a114327b8f1
'use strict';

exports.__esModule = true;
exports.attachNativeEvent = attachNativeEvent;
exports.AnimatedEvent = void 0;
var _AnimatedValue = _interopRequireDefault(require("./nodes/AnimatedValue"));
var _NativeAnimatedHelper = _interopRequireWildcard(require("./NativeAnimatedHelper"));
var _findNodeHandle = _interopRequireDefault(require("../../../exports/findNodeHandle"));
var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));
function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();
  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };
  return cache;
}
function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }
  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }
  var cache = _getRequireWildcardCache();
  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }
  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }
  newObj.default = obj;
  if (cache) {
    cache.set(obj, newObj);
  }
  return newObj;
}
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
var __DEV__ = process.env.NODE_ENV !== 'production';
function attachNativeEvent(viewRef, eventName, argMapping) {
  var eventMappings = [];
  var traverse = function traverse(value, path) {
    if (value instanceof _AnimatedValue.default) {
      value.__makeNative();
      eventMappings.push({
        nativeEventPath: path,
        animatedValueTag: value.__getNativeTag()
      });
    } else if (typeof value === 'object') {
      for (var _key in value) {
        traverse(value[_key], path.concat(_key));
      }
    }
  };
  (0, _invariant.default)(argMapping[0] && argMapping[0].nativeEvent, 'Native driven events only support animated values contained inside `nativeEvent`.');
  traverse(argMapping[0].nativeEvent, []);
  var viewTag = (0, _findNodeHandle.default)(viewRef);
  if (viewTag != null) {
    eventMappings.forEach(function (mapping) {
      _NativeAnimatedHelper.default.API.addAnimatedEventToView(viewTag, eventName, mapping);
    });
  }
  return {
    detach: function detach() {
      if (viewTag != null) {
        eventMappings.forEach(function (mapping) {
          _NativeAnimatedHelper.default.API.removeAnimatedEventFromView(viewTag, eventName, mapping.animatedValueTag);
        });
      }
    }
  };
}
function validateMapping(argMapping, args) {
  var validate = function validate(recMapping, recEvt, key) {
    if (recMapping instanceof _AnimatedValue.default) {
      (0, _invariant.default)(typeof recEvt === 'number', 'Bad mapping of event key ' + key + ', should be number but got ' + typeof recEvt);
      return;
    }
    if (typeof recEvt === 'number') {
      (0, _invariant.default)(recMapping instanceof _AnimatedValue.default, 'Bad mapping of type ' + typeof recMapping + ' for key ' + key + ', event value must map to AnimatedValue');
      return;
    }
    (0, _invariant.default)(typeof recMapping === 'object', 'Bad mapping of type ' + typeof recMapping + ' for key ' + key);
    (0, _invariant.default)(typeof recEvt === 'object', 'Bad event of type ' + typeof recEvt + ' for key ' + key);
    for (var mappingKey in recMapping) {
      validate(recMapping[mappingKey], recEvt[mappingKey], mappingKey);
    }
  };
  (0, _invariant.default)(args.length >= argMapping.length, 'Event has less arguments than mapping');
  argMapping.forEach(function (mapping, idx) {
    validate(mapping, args[idx], 'arg' + idx);
  });
}
var AnimatedEvent = function () {
  function AnimatedEvent(argMapping, config) {
    this._listeners = [];
    this._argMapping = argMapping;
    if (config == null) {
      console.warn('Animated.event now requires a second argument for options');
      config = {
        useNativeDriver: false
      };
    }
    if (config.listener) {
      this.__addListener(config.listener);
    }
    this._callListeners = this._callListeners.bind(this);
    this._attachedEvent = null;
    this.__isNative = (0, _NativeAnimatedHelper.shouldUseNativeDriver)(config);
  }
  var _proto = AnimatedEvent.prototype;
  _proto.__addListener = function __addListener(callback) {
    this._listeners.push(callback);
  };
  _proto.__removeListener = function __removeListener(callback) {
    this._listeners = this._listeners.filter(function (listener) {
      return listener !== callback;
    });
  };
  _proto.__attach = function __attach(viewRef, eventName) {
    (0, _invariant.default)(this.__isNative, 'Only native driven events need to be attached.');
    this._attachedEvent = attachNativeEvent(viewRef, eventName, this._argMapping);
  };
  _proto.__detach = function __detach(viewTag, eventName) {
    (0, _invariant.default)(this.__isNative, 'Only native driven events need to be detached.');
    this._attachedEvent && this._attachedEvent.detach();
  };
  _proto.__getHandler = function __getHandler() {
    var _this = this;
    if (this.__isNative) {
      if (__DEV__) {
        var _validatedMapping = false;
        return function () {
          for (var _len = arguments.length, args = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {
            args[_key2] = arguments[_key2];
          }
          if (!_validatedMapping) {
            validateMapping(_this._argMapping, args);
            _validatedMapping = true;
          }
          _this._callListeners.apply(_this, args);
        };
      } else {
        return this._callListeners;
      }
    }
    var validatedMapping = false;
    return function () {
      for (var _len2 = arguments.length, args = new Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {
        args[_key3] = arguments[_key3];
      }
      if (__DEV__ && !validatedMapping) {
        validateMapping(_this._argMapping, args);
        validatedMapping = true;
      }
      var traverse = function traverse(recMapping, recEvt, key) {
        if (recMapping instanceof _AnimatedValue.default) {
          if (typeof recEvt === 'number') {
            recMapping.setValue(recEvt);
          }
        } else if (typeof recMapping === 'object') {
          for (var mappingKey in recMapping) {
            traverse(recMapping[mappingKey], recEvt[mappingKey], mappingKey);
          }
        }
      };
      _this._argMapping.forEach(function (mapping, idx) {
        traverse(mapping, args[idx], 'arg' + idx);
      });
      _this._callListeners.apply(_this, args);
    };
  };
  _proto._callListeners = function _callListeners() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key4 = 0; _key4 < _len3; _key4++) {
      args[_key4] = arguments[_key4];
    }
    this._listeners.forEach(function (listener) {
      return listener.apply(void 0, args);
    });
  };
  return AnimatedEvent;
}();
exports.AnimatedEvent = AnimatedEvent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiX19lc01vZHVsZSIsImF0dGFjaE5hdGl2ZUV2ZW50IiwiQW5pbWF0ZWRFdmVudCIsIl9BbmltYXRlZFZhbHVlIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfTmF0aXZlQW5pbWF0ZWRIZWxwZXIiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9maW5kTm9kZUhhbmRsZSIsIl9pbnZhcmlhbnQiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJXZWFrTWFwIiwiY2FjaGUiLCJvYmoiLCJkZWZhdWx0IiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiX19ERVZfXyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInZpZXdSZWYiLCJldmVudE5hbWUiLCJhcmdNYXBwaW5nIiwiZXZlbnRNYXBwaW5ncyIsInRyYXZlcnNlIiwidmFsdWUiLCJwYXRoIiwiX19tYWtlTmF0aXZlIiwicHVzaCIsIm5hdGl2ZUV2ZW50UGF0aCIsImFuaW1hdGVkVmFsdWVUYWciLCJfX2dldE5hdGl2ZVRhZyIsIl9rZXkiLCJjb25jYXQiLCJuYXRpdmVFdmVudCIsInZpZXdUYWciLCJmb3JFYWNoIiwibWFwcGluZyIsIkFQSSIsImFkZEFuaW1hdGVkRXZlbnRUb1ZpZXciLCJkZXRhY2giLCJyZW1vdmVBbmltYXRlZEV2ZW50RnJvbVZpZXciLCJ2YWxpZGF0ZU1hcHBpbmciLCJhcmdzIiwidmFsaWRhdGUiLCJyZWNNYXBwaW5nIiwicmVjRXZ0IiwibWFwcGluZ0tleSIsImxlbmd0aCIsImlkeCIsImNvbmZpZyIsIl9saXN0ZW5lcnMiLCJfYXJnTWFwcGluZyIsImNvbnNvbGUiLCJ3YXJuIiwidXNlTmF0aXZlRHJpdmVyIiwibGlzdGVuZXIiLCJfX2FkZExpc3RlbmVyIiwiX2NhbGxMaXN0ZW5lcnMiLCJiaW5kIiwiX2F0dGFjaGVkRXZlbnQiLCJfX2lzTmF0aXZlIiwic2hvdWxkVXNlTmF0aXZlRHJpdmVyIiwiX3Byb3RvIiwiY2FsbGJhY2siLCJfX3JlbW92ZUxpc3RlbmVyIiwiZmlsdGVyIiwiX19hdHRhY2giLCJfX2RldGFjaCIsIl9fZ2V0SGFuZGxlciIsIl90aGlzIiwiX3ZhbGlkYXRlZE1hcHBpbmciLCJfbGVuIiwiYXJndW1lbnRzIiwiQXJyYXkiLCJfa2V5MiIsImFwcGx5IiwidmFsaWRhdGVkTWFwcGluZyIsIl9sZW4yIiwiX2tleTMiLCJzZXRWYWx1ZSIsIl9sZW4zIiwiX2tleTQiXSwic291cmNlcyI6WyJBbmltYXRlZEV2ZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogXG4gKiBAZm9ybWF0XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuYXR0YWNoTmF0aXZlRXZlbnQgPSBhdHRhY2hOYXRpdmVFdmVudDtcbmV4cG9ydHMuQW5pbWF0ZWRFdmVudCA9IHZvaWQgMDtcblxudmFyIF9BbmltYXRlZFZhbHVlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ub2Rlcy9BbmltYXRlZFZhbHVlXCIpKTtcblxudmFyIF9OYXRpdmVBbmltYXRlZEhlbHBlciA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCIuL05hdGl2ZUFuaW1hdGVkSGVscGVyXCIpKTtcblxudmFyIF9maW5kTm9kZUhhbmRsZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uLy4uLy4uL2V4cG9ydHMvZmluZE5vZGVIYW5kbGVcIikpO1xuXG52YXIgX2ludmFyaWFudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcImZianMvbGliL2ludmFyaWFudFwiKSk7XG5cbmZ1bmN0aW9uIF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSgpIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGUgPSBuZXcgV2Vha01hcCgpOyBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUgPSBmdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKSB7IHJldHVybiBjYWNoZTsgfTsgcmV0dXJuIGNhY2hlOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaikgeyBpZiAob2JqICYmIG9iai5fX2VzTW9kdWxlKSB7IHJldHVybiBvYmo7IH0gaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvYmogIT09IFwiZnVuY3Rpb25cIikgeyByZXR1cm4geyBkZWZhdWx0OiBvYmogfTsgfSB2YXIgY2FjaGUgPSBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUoKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmouZGVmYXVsdCA9IG9iajsgaWYgKGNhY2hlKSB7IGNhY2hlLnNldChvYmosIG5ld09iaik7IH0gcmV0dXJuIG5ld09iajsgfVxuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgX19ERVZfXyA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbic7XG5cbmZ1bmN0aW9uIGF0dGFjaE5hdGl2ZUV2ZW50KHZpZXdSZWYsIGV2ZW50TmFtZSwgYXJnTWFwcGluZykge1xuICAvLyBGaW5kIGFuaW1hdGVkIHZhbHVlcyBpbiBgYXJnTWFwcGluZ2AgYW5kIGNyZWF0ZSBhbiBhcnJheSByZXByZXNlbnRpbmcgdGhlaXJcbiAgLy8ga2V5IHBhdGggaW5zaWRlIHRoZSBgbmF0aXZlRXZlbnRgIG9iamVjdC4gRXguOiBbJ2NvbnRlbnRPZmZzZXQnLCAneCddLlxuICB2YXIgZXZlbnRNYXBwaW5ncyA9IFtdO1xuXG4gIHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIHRyYXZlcnNlKHZhbHVlLCBwYXRoKSB7XG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgX0FuaW1hdGVkVmFsdWUuZGVmYXVsdCkge1xuICAgICAgdmFsdWUuX19tYWtlTmF0aXZlKCk7XG5cbiAgICAgIGV2ZW50TWFwcGluZ3MucHVzaCh7XG4gICAgICAgIG5hdGl2ZUV2ZW50UGF0aDogcGF0aCxcbiAgICAgICAgYW5pbWF0ZWRWYWx1ZVRhZzogdmFsdWUuX19nZXROYXRpdmVUYWcoKVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBfa2V5IGluIHZhbHVlKSB7XG4gICAgICAgIHRyYXZlcnNlKHZhbHVlW19rZXldLCBwYXRoLmNvbmNhdChfa2V5KSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKGFyZ01hcHBpbmdbMF0gJiYgYXJnTWFwcGluZ1swXS5uYXRpdmVFdmVudCwgJ05hdGl2ZSBkcml2ZW4gZXZlbnRzIG9ubHkgc3VwcG9ydCBhbmltYXRlZCB2YWx1ZXMgY29udGFpbmVkIGluc2lkZSBgbmF0aXZlRXZlbnRgLicpOyAvLyBBc3N1bWUgdGhhdCB0aGUgZXZlbnQgY29udGFpbmluZyBgbmF0aXZlRXZlbnRgIGlzIGFsd2F5cyB0aGUgZmlyc3QgYXJndW1lbnQuXG5cbiAgdHJhdmVyc2UoYXJnTWFwcGluZ1swXS5uYXRpdmVFdmVudCwgW10pO1xuICB2YXIgdmlld1RhZyA9ICgwLCBfZmluZE5vZGVIYW5kbGUuZGVmYXVsdCkodmlld1JlZik7XG5cbiAgaWYgKHZpZXdUYWcgIT0gbnVsbCkge1xuICAgIGV2ZW50TWFwcGluZ3MuZm9yRWFjaChmdW5jdGlvbiAobWFwcGluZykge1xuICAgICAgX05hdGl2ZUFuaW1hdGVkSGVscGVyLmRlZmF1bHQuQVBJLmFkZEFuaW1hdGVkRXZlbnRUb1ZpZXcodmlld1RhZywgZXZlbnROYW1lLCBtYXBwaW5nKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZGV0YWNoOiBmdW5jdGlvbiBkZXRhY2goKSB7XG4gICAgICBpZiAodmlld1RhZyAhPSBudWxsKSB7XG4gICAgICAgIGV2ZW50TWFwcGluZ3MuZm9yRWFjaChmdW5jdGlvbiAobWFwcGluZykge1xuICAgICAgICAgIF9OYXRpdmVBbmltYXRlZEhlbHBlci5kZWZhdWx0LkFQSS5yZW1vdmVBbmltYXRlZEV2ZW50RnJvbVZpZXcodmlld1RhZywgZXZlbnROYW1lLCAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXVxuICAgICAgICAgIG1hcHBpbmcuYW5pbWF0ZWRWYWx1ZVRhZyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVNYXBwaW5nKGFyZ01hcHBpbmcsIGFyZ3MpIHtcbiAgdmFyIHZhbGlkYXRlID0gZnVuY3Rpb24gdmFsaWRhdGUocmVjTWFwcGluZywgcmVjRXZ0LCBrZXkpIHtcbiAgICBpZiAocmVjTWFwcGluZyBpbnN0YW5jZW9mIF9BbmltYXRlZFZhbHVlLmRlZmF1bHQpIHtcbiAgICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKHR5cGVvZiByZWNFdnQgPT09ICdudW1iZXInLCAnQmFkIG1hcHBpbmcgb2YgZXZlbnQga2V5ICcgKyBrZXkgKyAnLCBzaG91bGQgYmUgbnVtYmVyIGJ1dCBnb3QgJyArIHR5cGVvZiByZWNFdnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgcmVjRXZ0ID09PSAnbnVtYmVyJykge1xuICAgICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkocmVjTWFwcGluZyBpbnN0YW5jZW9mIF9BbmltYXRlZFZhbHVlLmRlZmF1bHQsICdCYWQgbWFwcGluZyBvZiB0eXBlICcgKyB0eXBlb2YgcmVjTWFwcGluZyArICcgZm9yIGtleSAnICsga2V5ICsgJywgZXZlbnQgdmFsdWUgbXVzdCBtYXAgdG8gQW5pbWF0ZWRWYWx1ZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKHR5cGVvZiByZWNNYXBwaW5nID09PSAnb2JqZWN0JywgJ0JhZCBtYXBwaW5nIG9mIHR5cGUgJyArIHR5cGVvZiByZWNNYXBwaW5nICsgJyBmb3Iga2V5ICcgKyBrZXkpO1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKHR5cGVvZiByZWNFdnQgPT09ICdvYmplY3QnLCAnQmFkIGV2ZW50IG9mIHR5cGUgJyArIHR5cGVvZiByZWNFdnQgKyAnIGZvciBrZXkgJyArIGtleSk7XG5cbiAgICBmb3IgKHZhciBtYXBwaW5nS2V5IGluIHJlY01hcHBpbmcpIHtcbiAgICAgIHZhbGlkYXRlKHJlY01hcHBpbmdbbWFwcGluZ0tleV0sIHJlY0V2dFttYXBwaW5nS2V5XSwgbWFwcGluZ0tleSk7XG4gICAgfVxuICB9O1xuXG4gICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKGFyZ3MubGVuZ3RoID49IGFyZ01hcHBpbmcubGVuZ3RoLCAnRXZlbnQgaGFzIGxlc3MgYXJndW1lbnRzIHRoYW4gbWFwcGluZycpO1xuICBhcmdNYXBwaW5nLmZvckVhY2goZnVuY3Rpb24gKG1hcHBpbmcsIGlkeCkge1xuICAgIHZhbGlkYXRlKG1hcHBpbmcsIGFyZ3NbaWR4XSwgJ2FyZycgKyBpZHgpO1xuICB9KTtcbn1cblxudmFyIEFuaW1hdGVkRXZlbnQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBBbmltYXRlZEV2ZW50KGFyZ01hcHBpbmcsIGNvbmZpZykge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuX2FyZ01hcHBpbmcgPSBhcmdNYXBwaW5nO1xuXG4gICAgaWYgKGNvbmZpZyA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0FuaW1hdGVkLmV2ZW50IG5vdyByZXF1aXJlcyBhIHNlY29uZCBhcmd1bWVudCBmb3Igb3B0aW9ucycpO1xuICAgICAgY29uZmlnID0ge1xuICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cblxuICAgIGlmIChjb25maWcubGlzdGVuZXIpIHtcbiAgICAgIHRoaXMuX19hZGRMaXN0ZW5lcihjb25maWcubGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHRoaXMuX2NhbGxMaXN0ZW5lcnMgPSB0aGlzLl9jYWxsTGlzdGVuZXJzLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fYXR0YWNoZWRFdmVudCA9IG51bGw7XG4gICAgdGhpcy5fX2lzTmF0aXZlID0gKDAsIF9OYXRpdmVBbmltYXRlZEhlbHBlci5zaG91bGRVc2VOYXRpdmVEcml2ZXIpKGNvbmZpZyk7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gQW5pbWF0ZWRFdmVudC5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLl9fYWRkTGlzdGVuZXIgPSBmdW5jdGlvbiBfX2FkZExpc3RlbmVyKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fbGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9O1xuXG4gIF9wcm90by5fX3JlbW92ZUxpc3RlbmVyID0gZnVuY3Rpb24gX19yZW1vdmVMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycy5maWx0ZXIoZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbGlzdGVuZXIgIT09IGNhbGxiYWNrO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5fX2F0dGFjaCA9IGZ1bmN0aW9uIF9fYXR0YWNoKHZpZXdSZWYsIGV2ZW50TmFtZSkge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKHRoaXMuX19pc05hdGl2ZSwgJ09ubHkgbmF0aXZlIGRyaXZlbiBldmVudHMgbmVlZCB0byBiZSBhdHRhY2hlZC4nKTtcbiAgICB0aGlzLl9hdHRhY2hlZEV2ZW50ID0gYXR0YWNoTmF0aXZlRXZlbnQodmlld1JlZiwgZXZlbnROYW1lLCB0aGlzLl9hcmdNYXBwaW5nKTtcbiAgfTtcblxuICBfcHJvdG8uX19kZXRhY2ggPSBmdW5jdGlvbiBfX2RldGFjaCh2aWV3VGFnLCBldmVudE5hbWUpIHtcbiAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KSh0aGlzLl9faXNOYXRpdmUsICdPbmx5IG5hdGl2ZSBkcml2ZW4gZXZlbnRzIG5lZWQgdG8gYmUgZGV0YWNoZWQuJyk7XG4gICAgdGhpcy5fYXR0YWNoZWRFdmVudCAmJiB0aGlzLl9hdHRhY2hlZEV2ZW50LmRldGFjaCgpO1xuICB9O1xuXG4gIF9wcm90by5fX2dldEhhbmRsZXIgPSBmdW5jdGlvbiBfX2dldEhhbmRsZXIoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICh0aGlzLl9faXNOYXRpdmUpIHtcbiAgICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICAgIHZhciBfdmFsaWRhdGVkTWFwcGluZyA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjsgX2tleTIrKykge1xuICAgICAgICAgICAgYXJnc1tfa2V5Ml0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghX3ZhbGlkYXRlZE1hcHBpbmcpIHtcbiAgICAgICAgICAgIHZhbGlkYXRlTWFwcGluZyhfdGhpcy5fYXJnTWFwcGluZywgYXJncyk7XG4gICAgICAgICAgICBfdmFsaWRhdGVkTWFwcGluZyA9IHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMuX2NhbGxMaXN0ZW5lcnMuYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxMaXN0ZW5lcnM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHZhbGlkYXRlZE1hcHBpbmcgPSBmYWxzZTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4yOyBfa2V5MysrKSB7XG4gICAgICAgIGFyZ3NbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICAgIH1cblxuICAgICAgaWYgKF9fREVWX18gJiYgIXZhbGlkYXRlZE1hcHBpbmcpIHtcbiAgICAgICAgdmFsaWRhdGVNYXBwaW5nKF90aGlzLl9hcmdNYXBwaW5nLCBhcmdzKTtcbiAgICAgICAgdmFsaWRhdGVkTWFwcGluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciB0cmF2ZXJzZSA9IGZ1bmN0aW9uIHRyYXZlcnNlKHJlY01hcHBpbmcsIHJlY0V2dCwga2V5KSB7XG4gICAgICAgIGlmIChyZWNNYXBwaW5nIGluc3RhbmNlb2YgX0FuaW1hdGVkVmFsdWUuZGVmYXVsdCkge1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVjRXZ0ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmVjTWFwcGluZy5zZXRWYWx1ZShyZWNFdnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcmVjTWFwcGluZyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBmb3IgKHZhciBtYXBwaW5nS2V5IGluIHJlY01hcHBpbmcpIHtcbiAgICAgICAgICAgIC8qICRGbG93Rml4TWUoPj0wLjEyMC4wKSBUaGlzIGNvbW1lbnQgc3VwcHJlc3NlcyBhbiBlcnJvciBmb3VuZFxuICAgICAgICAgICAgICogd2hlbiBGbG93IHYwLjEyMCB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGUgZXJyb3IsIGRlbGV0ZSB0aGlzXG4gICAgICAgICAgICAgKiBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgICAgICAgIHRyYXZlcnNlKHJlY01hcHBpbmdbbWFwcGluZ0tleV0sIHJlY0V2dFttYXBwaW5nS2V5XSwgbWFwcGluZ0tleSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBfdGhpcy5fYXJnTWFwcGluZy5mb3JFYWNoKGZ1bmN0aW9uIChtYXBwaW5nLCBpZHgpIHtcbiAgICAgICAgdHJhdmVyc2UobWFwcGluZywgYXJnc1tpZHhdLCAnYXJnJyArIGlkeCk7XG4gICAgICB9KTtcblxuICAgICAgX3RoaXMuX2NhbGxMaXN0ZW5lcnMuYXBwbHkoX3RoaXMsIGFyZ3MpO1xuICAgIH07XG4gIH07XG5cbiAgX3Byb3RvLl9jYWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gX2NhbGxMaXN0ZW5lcnMoKSB7XG4gICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTQgPSAwOyBfa2V5NCA8IF9sZW4zOyBfa2V5NCsrKSB7XG4gICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgfVxuXG4gICAgdGhpcy5fbGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gbGlzdGVuZXIuYXBwbHkodm9pZCAwLCBhcmdzKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gQW5pbWF0ZWRFdmVudDtcbn0oKTtcblxuZXhwb3J0cy5BbmltYXRlZEV2ZW50ID0gQW5pbWF0ZWRFdmVudDsiXSwibWFwcGluZ3MiOiJBQVNBLFlBQVk7O0FBRVpBLE9BQU8sQ0FBQ0MsVUFBVSxHQUFHLElBQUk7QUFDekJELE9BQU8sQ0FBQ0UsaUJBQWlCLEdBQUdBLGlCQUFpQjtBQUM3Q0YsT0FBTyxDQUFDRyxhQUFhLEdBQUcsS0FBSyxDQUFDO0FBRTlCLElBQUlDLGNBQWMsR0FBR0Msc0JBQXNCLENBQUNDLE9BQU8sd0JBQXdCLENBQUMsQ0FBQztBQUU3RSxJQUFJQyxxQkFBcUIsR0FBR0MsdUJBQXVCLENBQUNGLE9BQU8seUJBQXlCLENBQUMsQ0FBQztBQUV0RixJQUFJRyxlQUFlLEdBQUdKLHNCQUFzQixDQUFDQyxPQUFPLGtDQUFrQyxDQUFDLENBQUM7QUFFeEYsSUFBSUksVUFBVSxHQUFHTCxzQkFBc0IsQ0FBQ0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUM7QUFFdEUsU0FBU0ssd0JBQXdCQSxDQUFBLEVBQUc7RUFBRSxJQUFJLE9BQU9DLE9BQU8sS0FBSyxVQUFVLEVBQUUsT0FBTyxJQUFJO0VBQUUsSUFBSUMsS0FBSyxHQUFHLElBQUlELE9BQU8sQ0FBQyxDQUFDO0VBQUVELHdCQUF3QixHQUFHLFNBQVNBLHdCQUF3QkEsQ0FBQSxFQUFHO0lBQUUsT0FBT0UsS0FBSztFQUFFLENBQUM7RUFBRSxPQUFPQSxLQUFLO0FBQUU7QUFFak4sU0FBU0wsdUJBQXVCQSxDQUFDTSxHQUFHLEVBQUU7RUFBRSxJQUFJQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ2IsVUFBVSxFQUFFO0lBQUUsT0FBT2EsR0FBRztFQUFFO0VBQUUsSUFBSUEsR0FBRyxLQUFLLElBQUksSUFBSSxPQUFPQSxHQUFHLEtBQUssUUFBUSxJQUFJLE9BQU9BLEdBQUcsS0FBSyxVQUFVLEVBQUU7SUFBRSxPQUFPO01BQUVDLE9BQU8sRUFBRUQ7SUFBSSxDQUFDO0VBQUU7RUFBRSxJQUFJRCxLQUFLLEdBQUdGLHdCQUF3QixDQUFDLENBQUM7RUFBRSxJQUFJRSxLQUFLLElBQUlBLEtBQUssQ0FBQ0csR0FBRyxDQUFDRixHQUFHLENBQUMsRUFBRTtJQUFFLE9BQU9ELEtBQUssQ0FBQ0ksR0FBRyxDQUFDSCxHQUFHLENBQUM7RUFBRTtFQUFFLElBQUlJLE1BQU0sR0FBRyxDQUFDLENBQUM7RUFBRSxJQUFJQyxxQkFBcUIsR0FBR0MsTUFBTSxDQUFDQyxjQUFjLElBQUlELE1BQU0sQ0FBQ0Usd0JBQXdCO0VBQUUsS0FBSyxJQUFJQyxHQUFHLElBQUlULEdBQUcsRUFBRTtJQUFFLElBQUlNLE1BQU0sQ0FBQ0ksU0FBUyxDQUFDQyxjQUFjLENBQUNDLElBQUksQ0FBQ1osR0FBRyxFQUFFUyxHQUFHLENBQUMsRUFBRTtNQUFFLElBQUlJLElBQUksR0FBR1IscUJBQXFCLEdBQUdDLE1BQU0sQ0FBQ0Usd0JBQXdCLENBQUNSLEdBQUcsRUFBRVMsR0FBRyxDQUFDLEdBQUcsSUFBSTtNQUFFLElBQUlJLElBQUksS0FBS0EsSUFBSSxDQUFDVixHQUFHLElBQUlVLElBQUksQ0FBQ0MsR0FBRyxDQUFDLEVBQUU7UUFBRVIsTUFBTSxDQUFDQyxjQUFjLENBQUNILE1BQU0sRUFBRUssR0FBRyxFQUFFSSxJQUFJLENBQUM7TUFBRSxDQUFDLE1BQU07UUFBRVQsTUFBTSxDQUFDSyxHQUFHLENBQUMsR0FBR1QsR0FBRyxDQUFDUyxHQUFHLENBQUM7TUFBRTtJQUFFO0VBQUU7RUFBRUwsTUFBTSxDQUFDSCxPQUFPLEdBQUdELEdBQUc7RUFBRSxJQUFJRCxLQUFLLEVBQUU7SUFBRUEsS0FBSyxDQUFDZSxHQUFHLENBQUNkLEdBQUcsRUFBRUksTUFBTSxDQUFDO0VBQUU7RUFBRSxPQUFPQSxNQUFNO0FBQUU7QUFFdHVCLFNBQVNiLHNCQUFzQkEsQ0FBQ1MsR0FBRyxFQUFFO0VBQUUsT0FBT0EsR0FBRyxJQUFJQSxHQUFHLENBQUNiLFVBQVUsR0FBR2EsR0FBRyxHQUFHO0lBQUVDLE9BQU8sRUFBRUQ7RUFBSSxDQUFDO0FBQUU7QUFFOUYsSUFBSWUsT0FBTyxHQUFHQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLFlBQVk7QUFFbkQsU0FBUzlCLGlCQUFpQkEsQ0FBQytCLE9BQU8sRUFBRUMsU0FBUyxFQUFFQyxVQUFVLEVBQUU7RUFHekQsSUFBSUMsYUFBYSxHQUFHLEVBQUU7RUFFdEIsSUFBSUMsUUFBUSxHQUFHLFNBQVNBLFFBQVFBLENBQUNDLEtBQUssRUFBRUMsSUFBSSxFQUFFO0lBQzVDLElBQUlELEtBQUssWUFBWWxDLGNBQWMsQ0FBQ1csT0FBTyxFQUFFO01BQzNDdUIsS0FBSyxDQUFDRSxZQUFZLENBQUMsQ0FBQztNQUVwQkosYUFBYSxDQUFDSyxJQUFJLENBQUM7UUFDakJDLGVBQWUsRUFBRUgsSUFBSTtRQUNyQkksZ0JBQWdCLEVBQUVMLEtBQUssQ0FBQ00sY0FBYyxDQUFDO01BQ3pDLENBQUMsQ0FBQztJQUNKLENBQUMsTUFBTSxJQUFJLE9BQU9OLEtBQUssS0FBSyxRQUFRLEVBQUU7TUFDcEMsS0FBSyxJQUFJTyxJQUFJLElBQUlQLEtBQUssRUFBRTtRQUN0QkQsUUFBUSxDQUFDQyxLQUFLLENBQUNPLElBQUksQ0FBQyxFQUFFTixJQUFJLENBQUNPLE1BQU0sQ0FBQ0QsSUFBSSxDQUFDLENBQUM7TUFDMUM7SUFDRjtFQUNGLENBQUM7RUFFRCxDQUFDLENBQUMsRUFBRW5DLFVBQVUsQ0FBQ0ssT0FBTyxFQUFFb0IsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJQSxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUNZLFdBQVcsRUFBRSxtRkFBbUYsQ0FBQztFQUV4SlYsUUFBUSxDQUFDRixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUNZLFdBQVcsRUFBRSxFQUFFLENBQUM7RUFDdkMsSUFBSUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxFQUFFdkMsZUFBZSxDQUFDTSxPQUFPLEVBQUVrQixPQUFPLENBQUM7RUFFbkQsSUFBSWUsT0FBTyxJQUFJLElBQUksRUFBRTtJQUNuQlosYUFBYSxDQUFDYSxPQUFPLENBQUMsVUFBVUMsT0FBTyxFQUFFO01BQ3ZDM0MscUJBQXFCLENBQUNRLE9BQU8sQ0FBQ29DLEdBQUcsQ0FBQ0Msc0JBQXNCLENBQUNKLE9BQU8sRUFBRWQsU0FBUyxFQUFFZ0IsT0FBTyxDQUFDO0lBQ3ZGLENBQUMsQ0FBQztFQUNKO0VBRUEsT0FBTztJQUNMRyxNQUFNLEVBQUUsU0FBU0EsTUFBTUEsQ0FBQSxFQUFHO01BQ3hCLElBQUlMLE9BQU8sSUFBSSxJQUFJLEVBQUU7UUFDbkJaLGFBQWEsQ0FBQ2EsT0FBTyxDQUFDLFVBQVVDLE9BQU8sRUFBRTtVQUN2QzNDLHFCQUFxQixDQUFDUSxPQUFPLENBQUNvQyxHQUFHLENBQUNHLDJCQUEyQixDQUFDTixPQUFPLEVBQUVkLFNBQVMsRUFDaEZnQixPQUFPLENBQUNQLGdCQUFnQixDQUFDO1FBQzNCLENBQUMsQ0FBQztNQUNKO0lBQ0Y7RUFDRixDQUFDO0FBQ0g7QUFFQSxTQUFTWSxlQUFlQSxDQUFDcEIsVUFBVSxFQUFFcUIsSUFBSSxFQUFFO0VBQ3pDLElBQUlDLFFBQVEsR0FBRyxTQUFTQSxRQUFRQSxDQUFDQyxVQUFVLEVBQUVDLE1BQU0sRUFBRXBDLEdBQUcsRUFBRTtJQUN4RCxJQUFJbUMsVUFBVSxZQUFZdEQsY0FBYyxDQUFDVyxPQUFPLEVBQUU7TUFDaEQsQ0FBQyxDQUFDLEVBQUVMLFVBQVUsQ0FBQ0ssT0FBTyxFQUFFLE9BQU80QyxNQUFNLEtBQUssUUFBUSxFQUFFLDJCQUEyQixHQUFHcEMsR0FBRyxHQUFHLDZCQUE2QixHQUFHLE9BQU9vQyxNQUFNLENBQUM7TUFDdEk7SUFDRjtJQUVBLElBQUksT0FBT0EsTUFBTSxLQUFLLFFBQVEsRUFBRTtNQUM5QixDQUFDLENBQUMsRUFBRWpELFVBQVUsQ0FBQ0ssT0FBTyxFQUFFMkMsVUFBVSxZQUFZdEQsY0FBYyxDQUFDVyxPQUFPLEVBQUUsc0JBQXNCLEdBQUcsT0FBTzJDLFVBQVUsR0FBRyxXQUFXLEdBQUduQyxHQUFHLEdBQUcseUNBQXlDLENBQUM7TUFDakw7SUFDRjtJQUVBLENBQUMsQ0FBQyxFQUFFYixVQUFVLENBQUNLLE9BQU8sRUFBRSxPQUFPMkMsVUFBVSxLQUFLLFFBQVEsRUFBRSxzQkFBc0IsR0FBRyxPQUFPQSxVQUFVLEdBQUcsV0FBVyxHQUFHbkMsR0FBRyxDQUFDO0lBQ3ZILENBQUMsQ0FBQyxFQUFFYixVQUFVLENBQUNLLE9BQU8sRUFBRSxPQUFPNEMsTUFBTSxLQUFLLFFBQVEsRUFBRSxvQkFBb0IsR0FBRyxPQUFPQSxNQUFNLEdBQUcsV0FBVyxHQUFHcEMsR0FBRyxDQUFDO0lBRTdHLEtBQUssSUFBSXFDLFVBQVUsSUFBSUYsVUFBVSxFQUFFO01BQ2pDRCxRQUFRLENBQUNDLFVBQVUsQ0FBQ0UsVUFBVSxDQUFDLEVBQUVELE1BQU0sQ0FBQ0MsVUFBVSxDQUFDLEVBQUVBLFVBQVUsQ0FBQztJQUNsRTtFQUNGLENBQUM7RUFFRCxDQUFDLENBQUMsRUFBRWxELFVBQVUsQ0FBQ0ssT0FBTyxFQUFFeUMsSUFBSSxDQUFDSyxNQUFNLElBQUkxQixVQUFVLENBQUMwQixNQUFNLEVBQUUsdUNBQXVDLENBQUM7RUFDbEcxQixVQUFVLENBQUNjLE9BQU8sQ0FBQyxVQUFVQyxPQUFPLEVBQUVZLEdBQUcsRUFBRTtJQUN6Q0wsUUFBUSxDQUFDUCxPQUFPLEVBQUVNLElBQUksQ0FBQ00sR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHQSxHQUFHLENBQUM7RUFDM0MsQ0FBQyxDQUFDO0FBQ0o7QUFFQSxJQUFJM0QsYUFBYSxHQUFnQixZQUFZO0VBQzNDLFNBQVNBLGFBQWFBLENBQUNnQyxVQUFVLEVBQUU0QixNQUFNLEVBQUU7SUFDekMsSUFBSSxDQUFDQyxVQUFVLEdBQUcsRUFBRTtJQUNwQixJQUFJLENBQUNDLFdBQVcsR0FBRzlCLFVBQVU7SUFFN0IsSUFBSTRCLE1BQU0sSUFBSSxJQUFJLEVBQUU7TUFDbEJHLE9BQU8sQ0FBQ0MsSUFBSSxDQUFDLDJEQUEyRCxDQUFDO01BQ3pFSixNQUFNLEdBQUc7UUFDUEssZUFBZSxFQUFFO01BQ25CLENBQUM7SUFDSDtJQUVBLElBQUlMLE1BQU0sQ0FBQ00sUUFBUSxFQUFFO01BQ25CLElBQUksQ0FBQ0MsYUFBYSxDQUFDUCxNQUFNLENBQUNNLFFBQVEsQ0FBQztJQUNyQztJQUVBLElBQUksQ0FBQ0UsY0FBYyxHQUFHLElBQUksQ0FBQ0EsY0FBYyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3BELElBQUksQ0FBQ0MsY0FBYyxHQUFHLElBQUk7SUFDMUIsSUFBSSxDQUFDQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEVBQUVuRSxxQkFBcUIsQ0FBQ29FLHFCQUFxQixFQUFFWixNQUFNLENBQUM7RUFDNUU7RUFFQSxJQUFJYSxNQUFNLEdBQUd6RSxhQUFhLENBQUNxQixTQUFTO0VBRXBDb0QsTUFBTSxDQUFDTixhQUFhLEdBQUcsU0FBU0EsYUFBYUEsQ0FBQ08sUUFBUSxFQUFFO0lBQ3RELElBQUksQ0FBQ2IsVUFBVSxDQUFDdkIsSUFBSSxDQUFDb0MsUUFBUSxDQUFDO0VBQ2hDLENBQUM7RUFFREQsTUFBTSxDQUFDRSxnQkFBZ0IsR0FBRyxTQUFTQSxnQkFBZ0JBLENBQUNELFFBQVEsRUFBRTtJQUM1RCxJQUFJLENBQUNiLFVBQVUsR0FBRyxJQUFJLENBQUNBLFVBQVUsQ0FBQ2UsTUFBTSxDQUFDLFVBQVVWLFFBQVEsRUFBRTtNQUMzRCxPQUFPQSxRQUFRLEtBQUtRLFFBQVE7SUFDOUIsQ0FBQyxDQUFDO0VBQ0osQ0FBQztFQUVERCxNQUFNLENBQUNJLFFBQVEsR0FBRyxTQUFTQSxRQUFRQSxDQUFDL0MsT0FBTyxFQUFFQyxTQUFTLEVBQUU7SUFDdEQsQ0FBQyxDQUFDLEVBQUV4QixVQUFVLENBQUNLLE9BQU8sRUFBRSxJQUFJLENBQUMyRCxVQUFVLEVBQUUsZ0RBQWdELENBQUM7SUFDMUYsSUFBSSxDQUFDRCxjQUFjLEdBQUd2RSxpQkFBaUIsQ0FBQytCLE9BQU8sRUFBRUMsU0FBUyxFQUFFLElBQUksQ0FBQytCLFdBQVcsQ0FBQztFQUMvRSxDQUFDO0VBRURXLE1BQU0sQ0FBQ0ssUUFBUSxHQUFHLFNBQVNBLFFBQVFBLENBQUNqQyxPQUFPLEVBQUVkLFNBQVMsRUFBRTtJQUN0RCxDQUFDLENBQUMsRUFBRXhCLFVBQVUsQ0FBQ0ssT0FBTyxFQUFFLElBQUksQ0FBQzJELFVBQVUsRUFBRSxnREFBZ0QsQ0FBQztJQUMxRixJQUFJLENBQUNELGNBQWMsSUFBSSxJQUFJLENBQUNBLGNBQWMsQ0FBQ3BCLE1BQU0sQ0FBQyxDQUFDO0VBQ3JELENBQUM7RUFFRHVCLE1BQU0sQ0FBQ00sWUFBWSxHQUFHLFNBQVNBLFlBQVlBLENBQUEsRUFBRztJQUM1QyxJQUFJQyxLQUFLLEdBQUcsSUFBSTtJQUVoQixJQUFJLElBQUksQ0FBQ1QsVUFBVSxFQUFFO01BQ25CLElBQUk3QyxPQUFPLEVBQUU7UUFDWCxJQUFJdUQsaUJBQWlCLEdBQUcsS0FBSztRQUM3QixPQUFPLFlBQVk7VUFDakIsS0FBSyxJQUFJQyxJQUFJLEdBQUdDLFNBQVMsQ0FBQ3pCLE1BQU0sRUFBRUwsSUFBSSxHQUFHLElBQUkrQixLQUFLLENBQUNGLElBQUksQ0FBQyxFQUFFRyxLQUFLLEdBQUcsQ0FBQyxFQUFFQSxLQUFLLEdBQUdILElBQUksRUFBRUcsS0FBSyxFQUFFLEVBQUU7WUFDMUZoQyxJQUFJLENBQUNnQyxLQUFLLENBQUMsR0FBR0YsU0FBUyxDQUFDRSxLQUFLLENBQUM7VUFDaEM7VUFFQSxJQUFJLENBQUNKLGlCQUFpQixFQUFFO1lBQ3RCN0IsZUFBZSxDQUFDNEIsS0FBSyxDQUFDbEIsV0FBVyxFQUFFVCxJQUFJLENBQUM7WUFDeEM0QixpQkFBaUIsR0FBRyxJQUFJO1VBQzFCO1VBRUFELEtBQUssQ0FBQ1osY0FBYyxDQUFDa0IsS0FBSyxDQUFDTixLQUFLLEVBQUUzQixJQUFJLENBQUM7UUFDekMsQ0FBQztNQUNILENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSSxDQUFDZSxjQUFjO01BQzVCO0lBQ0Y7SUFFQSxJQUFJbUIsZ0JBQWdCLEdBQUcsS0FBSztJQUM1QixPQUFPLFlBQVk7TUFDakIsS0FBSyxJQUFJQyxLQUFLLEdBQUdMLFNBQVMsQ0FBQ3pCLE1BQU0sRUFBRUwsSUFBSSxHQUFHLElBQUkrQixLQUFLLENBQUNJLEtBQUssQ0FBQyxFQUFFQyxLQUFLLEdBQUcsQ0FBQyxFQUFFQSxLQUFLLEdBQUdELEtBQUssRUFBRUMsS0FBSyxFQUFFLEVBQUU7UUFDN0ZwQyxJQUFJLENBQUNvQyxLQUFLLENBQUMsR0FBR04sU0FBUyxDQUFDTSxLQUFLLENBQUM7TUFDaEM7TUFFQSxJQUFJL0QsT0FBTyxJQUFJLENBQUM2RCxnQkFBZ0IsRUFBRTtRQUNoQ25DLGVBQWUsQ0FBQzRCLEtBQUssQ0FBQ2xCLFdBQVcsRUFBRVQsSUFBSSxDQUFDO1FBQ3hDa0MsZ0JBQWdCLEdBQUcsSUFBSTtNQUN6QjtNQUVBLElBQUlyRCxRQUFRLEdBQUcsU0FBU0EsUUFBUUEsQ0FBQ3FCLFVBQVUsRUFBRUMsTUFBTSxFQUFFcEMsR0FBRyxFQUFFO1FBQ3hELElBQUltQyxVQUFVLFlBQVl0RCxjQUFjLENBQUNXLE9BQU8sRUFBRTtVQUNoRCxJQUFJLE9BQU80QyxNQUFNLEtBQUssUUFBUSxFQUFFO1lBQzlCRCxVQUFVLENBQUNtQyxRQUFRLENBQUNsQyxNQUFNLENBQUM7VUFDN0I7UUFDRixDQUFDLE1BQU0sSUFBSSxPQUFPRCxVQUFVLEtBQUssUUFBUSxFQUFFO1VBQ3pDLEtBQUssSUFBSUUsVUFBVSxJQUFJRixVQUFVLEVBQUU7WUFJakNyQixRQUFRLENBQUNxQixVQUFVLENBQUNFLFVBQVUsQ0FBQyxFQUFFRCxNQUFNLENBQUNDLFVBQVUsQ0FBQyxFQUFFQSxVQUFVLENBQUM7VUFDbEU7UUFDRjtNQUNGLENBQUM7TUFFRHVCLEtBQUssQ0FBQ2xCLFdBQVcsQ0FBQ2hCLE9BQU8sQ0FBQyxVQUFVQyxPQUFPLEVBQUVZLEdBQUcsRUFBRTtRQUNoRHpCLFFBQVEsQ0FBQ2EsT0FBTyxFQUFFTSxJQUFJLENBQUNNLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBR0EsR0FBRyxDQUFDO01BQzNDLENBQUMsQ0FBQztNQUVGcUIsS0FBSyxDQUFDWixjQUFjLENBQUNrQixLQUFLLENBQUNOLEtBQUssRUFBRTNCLElBQUksQ0FBQztJQUN6QyxDQUFDO0VBQ0gsQ0FBQztFQUVEb0IsTUFBTSxDQUFDTCxjQUFjLEdBQUcsU0FBU0EsY0FBY0EsQ0FBQSxFQUFHO0lBQ2hELEtBQUssSUFBSXVCLEtBQUssR0FBR1IsU0FBUyxDQUFDekIsTUFBTSxFQUFFTCxJQUFJLEdBQUcsSUFBSStCLEtBQUssQ0FBQ08sS0FBSyxDQUFDLEVBQUVDLEtBQUssR0FBRyxDQUFDLEVBQUVBLEtBQUssR0FBR0QsS0FBSyxFQUFFQyxLQUFLLEVBQUUsRUFBRTtNQUM3RnZDLElBQUksQ0FBQ3VDLEtBQUssQ0FBQyxHQUFHVCxTQUFTLENBQUNTLEtBQUssQ0FBQztJQUNoQztJQUVBLElBQUksQ0FBQy9CLFVBQVUsQ0FBQ2YsT0FBTyxDQUFDLFVBQVVvQixRQUFRLEVBQUU7TUFDMUMsT0FBT0EsUUFBUSxDQUFDb0IsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFakMsSUFBSSxDQUFDO0lBQ3JDLENBQUMsQ0FBQztFQUNKLENBQUM7RUFFRCxPQUFPckQsYUFBYTtBQUN0QixDQUFDLENBQUMsQ0FBQztBQUVISCxPQUFPLENBQUNHLGFBQWEsR0FBR0EsYUFBYSIsImlnbm9yZUxpc3QiOltdfQ==