454092ec77398f59af06ea178128415d
'use strict';

exports.__esModule = true;
exports.default = void 0;
var _AnimatedValue = _interopRequireDefault(require("../nodes/AnimatedValue"));
var _AnimatedValueXY = _interopRequireDefault(require("../nodes/AnimatedValueXY"));
var _AnimatedInterpolation = _interopRequireDefault(require("../nodes/AnimatedInterpolation"));
var _Animation2 = _interopRequireDefault(require("./Animation"));
var _SpringConfig = _interopRequireDefault(require("../SpringConfig"));
var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));
var _NativeAnimatedHelper = require("../NativeAnimatedHelper");
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  _setPrototypeOf(subClass, superClass);
}
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {
    o.__proto__ = p;
    return o;
  };
  return _setPrototypeOf(o, p);
}
var SpringAnimation = function (_Animation) {
  _inheritsLoose(SpringAnimation, _Animation);
  function SpringAnimation(config) {
    var _config$overshootClam, _config$restDisplacem, _config$restSpeedThre, _config$velocity, _config$velocity2, _config$delay, _config$isInteraction, _config$iterations;
    var _this;
    _this = _Animation.call(this) || this;
    _this._overshootClamping = (_config$overshootClam = config.overshootClamping) !== null && _config$overshootClam !== void 0 ? _config$overshootClam : false;
    _this._restDisplacementThreshold = (_config$restDisplacem = config.restDisplacementThreshold) !== null && _config$restDisplacem !== void 0 ? _config$restDisplacem : 0.001;
    _this._restSpeedThreshold = (_config$restSpeedThre = config.restSpeedThreshold) !== null && _config$restSpeedThre !== void 0 ? _config$restSpeedThre : 0.001;
    _this._initialVelocity = (_config$velocity = config.velocity) !== null && _config$velocity !== void 0 ? _config$velocity : 0;
    _this._lastVelocity = (_config$velocity2 = config.velocity) !== null && _config$velocity2 !== void 0 ? _config$velocity2 : 0;
    _this._toValue = config.toValue;
    _this._delay = (_config$delay = config.delay) !== null && _config$delay !== void 0 ? _config$delay : 0;
    _this._useNativeDriver = (0, _NativeAnimatedHelper.shouldUseNativeDriver)(config);
    _this.__isInteraction = (_config$isInteraction = config.isInteraction) !== null && _config$isInteraction !== void 0 ? _config$isInteraction : !_this._useNativeDriver;
    _this.__iterations = (_config$iterations = config.iterations) !== null && _config$iterations !== void 0 ? _config$iterations : 1;
    if (config.stiffness !== undefined || config.damping !== undefined || config.mass !== undefined) {
      var _config$stiffness, _config$damping, _config$mass;
      (0, _invariant.default)(config.bounciness === undefined && config.speed === undefined && config.tension === undefined && config.friction === undefined, 'You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one');
      _this._stiffness = (_config$stiffness = config.stiffness) !== null && _config$stiffness !== void 0 ? _config$stiffness : 100;
      _this._damping = (_config$damping = config.damping) !== null && _config$damping !== void 0 ? _config$damping : 10;
      _this._mass = (_config$mass = config.mass) !== null && _config$mass !== void 0 ? _config$mass : 1;
    } else if (config.bounciness !== undefined || config.speed !== undefined) {
      var _config$bounciness, _config$speed;
      (0, _invariant.default)(config.tension === undefined && config.friction === undefined && config.stiffness === undefined && config.damping === undefined && config.mass === undefined, 'You can define one of bounciness/speed, tension/friction, or stiffness/damping/mass, but not more than one');
      var springConfig = _SpringConfig.default.fromBouncinessAndSpeed((_config$bounciness = config.bounciness) !== null && _config$bounciness !== void 0 ? _config$bounciness : 8, (_config$speed = config.speed) !== null && _config$speed !== void 0 ? _config$speed : 12);
      _this._stiffness = springConfig.stiffness;
      _this._damping = springConfig.damping;
      _this._mass = 1;
    } else {
      var _config$tension, _config$friction;
      var _springConfig = _SpringConfig.default.fromOrigamiTensionAndFriction((_config$tension = config.tension) !== null && _config$tension !== void 0 ? _config$tension : 40, (_config$friction = config.friction) !== null && _config$friction !== void 0 ? _config$friction : 7);
      _this._stiffness = _springConfig.stiffness;
      _this._damping = _springConfig.damping;
      _this._mass = 1;
    }
    (0, _invariant.default)(_this._stiffness > 0, 'Stiffness value must be greater than 0');
    (0, _invariant.default)(_this._damping > 0, 'Damping value must be greater than 0');
    (0, _invariant.default)(_this._mass > 0, 'Mass value must be greater than 0');
    return _this;
  }
  var _proto = SpringAnimation.prototype;
  _proto.__getNativeAnimationConfig = function __getNativeAnimationConfig() {
    var _this$_initialVelocit;
    return {
      type: 'spring',
      overshootClamping: this._overshootClamping,
      restDisplacementThreshold: this._restDisplacementThreshold,
      restSpeedThreshold: this._restSpeedThreshold,
      stiffness: this._stiffness,
      damping: this._damping,
      mass: this._mass,
      initialVelocity: (_this$_initialVelocit = this._initialVelocity) !== null && _this$_initialVelocit !== void 0 ? _this$_initialVelocit : this._lastVelocity,
      toValue: this._toValue,
      iterations: this.__iterations
    };
  };
  _proto.start = function start(fromValue, onUpdate, onEnd, previousAnimation, animatedValue) {
    var _this2 = this;
    this.__active = true;
    this._startPosition = fromValue;
    this._lastPosition = this._startPosition;
    this._onUpdate = onUpdate;
    this.__onEnd = onEnd;
    this._lastTime = Date.now();
    this._frameTime = 0.0;
    if (previousAnimation instanceof SpringAnimation) {
      var internalState = previousAnimation.getInternalState();
      this._lastPosition = internalState.lastPosition;
      this._lastVelocity = internalState.lastVelocity;
      this._initialVelocity = this._lastVelocity;
      this._lastTime = internalState.lastTime;
    }
    var start = function start() {
      if (_this2._useNativeDriver) {
        _this2.__startNativeAnimation(animatedValue);
      } else {
        _this2.onUpdate();
      }
    };
    if (this._delay) {
      this._timeout = setTimeout(start, this._delay);
    } else {
      start();
    }
  };
  _proto.getInternalState = function getInternalState() {
    return {
      lastPosition: this._lastPosition,
      lastVelocity: this._lastVelocity,
      lastTime: this._lastTime
    };
  };
  _proto.onUpdate = function onUpdate() {
    var MAX_STEPS = 64;
    var now = Date.now();
    if (now > this._lastTime + MAX_STEPS) {
      now = this._lastTime + MAX_STEPS;
    }
    var deltaTime = (now - this._lastTime) / 1000;
    this._frameTime += deltaTime;
    var c = this._damping;
    var m = this._mass;
    var k = this._stiffness;
    var v0 = -this._initialVelocity;
    var zeta = c / (2 * Math.sqrt(k * m));
    var omega0 = Math.sqrt(k / m);
    var omega1 = omega0 * Math.sqrt(1.0 - zeta * zeta);
    var x0 = this._toValue - this._startPosition;
    var position = 0.0;
    var velocity = 0.0;
    var t = this._frameTime;
    if (zeta < 1) {
      var envelope = Math.exp(-zeta * omega0 * t);
      position = this._toValue - envelope * ((v0 + zeta * omega0 * x0) / omega1 * Math.sin(omega1 * t) + x0 * Math.cos(omega1 * t));
      velocity = zeta * omega0 * envelope * (Math.sin(omega1 * t) * (v0 + zeta * omega0 * x0) / omega1 + x0 * Math.cos(omega1 * t)) - envelope * (Math.cos(omega1 * t) * (v0 + zeta * omega0 * x0) - omega1 * x0 * Math.sin(omega1 * t));
    } else {
      var _envelope = Math.exp(-omega0 * t);
      position = this._toValue - _envelope * (x0 + (v0 + omega0 * x0) * t);
      velocity = _envelope * (v0 * (t * omega0 - 1) + t * x0 * (omega0 * omega0));
    }
    this._lastTime = now;
    this._lastPosition = position;
    this._lastVelocity = velocity;
    this._onUpdate(position);
    if (!this.__active) {
      return;
    }
    var isOvershooting = false;
    if (this._overshootClamping && this._stiffness !== 0) {
      if (this._startPosition < this._toValue) {
        isOvershooting = position > this._toValue;
      } else {
        isOvershooting = position < this._toValue;
      }
    }
    var isVelocity = Math.abs(velocity) <= this._restSpeedThreshold;
    var isDisplacement = true;
    if (this._stiffness !== 0) {
      isDisplacement = Math.abs(this._toValue - position) <= this._restDisplacementThreshold;
    }
    if (isOvershooting || isVelocity && isDisplacement) {
      if (this._stiffness !== 0) {
        this._lastPosition = this._toValue;
        this._lastVelocity = 0;
        this._onUpdate(this._toValue);
      }
      this.__debouncedOnEnd({
        finished: true
      });
      return;
    }
    this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));
  };
  _proto.stop = function stop() {
    _Animation.prototype.stop.call(this);
    this.__active = false;
    clearTimeout(this._timeout);
    global.cancelAnimationFrame(this._animationFrame);
    this.__debouncedOnEnd({
      finished: false
    });
  };
  return SpringAnimation;
}(_Animation2.default);
var _default = SpringAnimation;
exports.default = _default;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfQW5pbWF0ZWRWYWx1ZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX0FuaW1hdGVkVmFsdWVYWSIsIl9BbmltYXRlZEludGVycG9sYXRpb24iLCJfQW5pbWF0aW9uMiIsIl9TcHJpbmdDb25maWciLCJfaW52YXJpYW50IiwiX05hdGl2ZUFuaW1hdGVkSGVscGVyIiwib2JqIiwiX2luaGVyaXRzTG9vc2UiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJwcm90b3R5cGUiLCJPYmplY3QiLCJjcmVhdGUiLCJjb25zdHJ1Y3RvciIsIl9zZXRQcm90b3R5cGVPZiIsIm8iLCJwIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJTcHJpbmdBbmltYXRpb24iLCJfQW5pbWF0aW9uIiwiY29uZmlnIiwiX2NvbmZpZyRvdmVyc2hvb3RDbGFtIiwiX2NvbmZpZyRyZXN0RGlzcGxhY2VtIiwiX2NvbmZpZyRyZXN0U3BlZWRUaHJlIiwiX2NvbmZpZyR2ZWxvY2l0eSIsIl9jb25maWckdmVsb2NpdHkyIiwiX2NvbmZpZyRkZWxheSIsIl9jb25maWckaXNJbnRlcmFjdGlvbiIsIl9jb25maWckaXRlcmF0aW9ucyIsIl90aGlzIiwiY2FsbCIsIl9vdmVyc2hvb3RDbGFtcGluZyIsIm92ZXJzaG9vdENsYW1waW5nIiwiX3Jlc3REaXNwbGFjZW1lbnRUaHJlc2hvbGQiLCJyZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkIiwiX3Jlc3RTcGVlZFRocmVzaG9sZCIsInJlc3RTcGVlZFRocmVzaG9sZCIsIl9pbml0aWFsVmVsb2NpdHkiLCJ2ZWxvY2l0eSIsIl9sYXN0VmVsb2NpdHkiLCJfdG9WYWx1ZSIsInRvVmFsdWUiLCJfZGVsYXkiLCJkZWxheSIsIl91c2VOYXRpdmVEcml2ZXIiLCJzaG91bGRVc2VOYXRpdmVEcml2ZXIiLCJfX2lzSW50ZXJhY3Rpb24iLCJpc0ludGVyYWN0aW9uIiwiX19pdGVyYXRpb25zIiwiaXRlcmF0aW9ucyIsInN0aWZmbmVzcyIsInVuZGVmaW5lZCIsImRhbXBpbmciLCJtYXNzIiwiX2NvbmZpZyRzdGlmZm5lc3MiLCJfY29uZmlnJGRhbXBpbmciLCJfY29uZmlnJG1hc3MiLCJib3VuY2luZXNzIiwic3BlZWQiLCJ0ZW5zaW9uIiwiZnJpY3Rpb24iLCJfc3RpZmZuZXNzIiwiX2RhbXBpbmciLCJfbWFzcyIsIl9jb25maWckYm91bmNpbmVzcyIsIl9jb25maWckc3BlZWQiLCJzcHJpbmdDb25maWciLCJmcm9tQm91bmNpbmVzc0FuZFNwZWVkIiwiX2NvbmZpZyR0ZW5zaW9uIiwiX2NvbmZpZyRmcmljdGlvbiIsIl9zcHJpbmdDb25maWciLCJmcm9tT3JpZ2FtaVRlbnNpb25BbmRGcmljdGlvbiIsIl9wcm90byIsIl9fZ2V0TmF0aXZlQW5pbWF0aW9uQ29uZmlnIiwiX3RoaXMkX2luaXRpYWxWZWxvY2l0IiwidHlwZSIsImluaXRpYWxWZWxvY2l0eSIsInN0YXJ0IiwiZnJvbVZhbHVlIiwib25VcGRhdGUiLCJvbkVuZCIsInByZXZpb3VzQW5pbWF0aW9uIiwiYW5pbWF0ZWRWYWx1ZSIsIl90aGlzMiIsIl9fYWN0aXZlIiwiX3N0YXJ0UG9zaXRpb24iLCJfbGFzdFBvc2l0aW9uIiwiX29uVXBkYXRlIiwiX19vbkVuZCIsIl9sYXN0VGltZSIsIkRhdGUiLCJub3ciLCJfZnJhbWVUaW1lIiwiaW50ZXJuYWxTdGF0ZSIsImdldEludGVybmFsU3RhdGUiLCJsYXN0UG9zaXRpb24iLCJsYXN0VmVsb2NpdHkiLCJsYXN0VGltZSIsIl9fc3RhcnROYXRpdmVBbmltYXRpb24iLCJfdGltZW91dCIsInNldFRpbWVvdXQiLCJNQVhfU1RFUFMiLCJkZWx0YVRpbWUiLCJjIiwibSIsImsiLCJ2MCIsInpldGEiLCJNYXRoIiwic3FydCIsIm9tZWdhMCIsIm9tZWdhMSIsIngwIiwicG9zaXRpb24iLCJ0IiwiZW52ZWxvcGUiLCJleHAiLCJzaW4iLCJjb3MiLCJfZW52ZWxvcGUiLCJpc092ZXJzaG9vdGluZyIsImlzVmVsb2NpdHkiLCJhYnMiLCJpc0Rpc3BsYWNlbWVudCIsIl9fZGVib3VuY2VkT25FbmQiLCJmaW5pc2hlZCIsIl9hbmltYXRpb25GcmFtZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImJpbmQiLCJzdG9wIiwiY2xlYXJUaW1lb3V0IiwiZ2xvYmFsIiwiY2FuY2VsQW5pbWF0aW9uRnJhbWUiLCJfZGVmYXVsdCIsIm1vZHVsZSJdLCJzb3VyY2VzIjpbIlNwcmluZ0FuaW1hdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIFxuICogQGZvcm1hdFxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG5cbnZhciBfQW5pbWF0ZWRWYWx1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL25vZGVzL0FuaW1hdGVkVmFsdWVcIikpO1xuXG52YXIgX0FuaW1hdGVkVmFsdWVYWSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL25vZGVzL0FuaW1hdGVkVmFsdWVYWVwiKSk7XG5cbnZhciBfQW5pbWF0ZWRJbnRlcnBvbGF0aW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vbm9kZXMvQW5pbWF0ZWRJbnRlcnBvbGF0aW9uXCIpKTtcblxudmFyIF9BbmltYXRpb24yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9BbmltYXRpb25cIikpO1xuXG52YXIgX1NwcmluZ0NvbmZpZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL1NwcmluZ0NvbmZpZ1wiKSk7XG5cbnZhciBfaW52YXJpYW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiZmJqcy9saWIvaW52YXJpYW50XCIpKTtcblxudmFyIF9OYXRpdmVBbmltYXRlZEhlbHBlciA9IHJlcXVpcmUoXCIuLi9OYXRpdmVBbmltYXRlZEhlbHBlclwiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7IHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzOyBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbnZhciBTcHJpbmdBbmltYXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9BbmltYXRpb24pIHtcbiAgX2luaGVyaXRzTG9vc2UoU3ByaW5nQW5pbWF0aW9uLCBfQW5pbWF0aW9uKTtcblxuICBmdW5jdGlvbiBTcHJpbmdBbmltYXRpb24oY29uZmlnKSB7XG4gICAgdmFyIF9jb25maWckb3ZlcnNob290Q2xhbSwgX2NvbmZpZyRyZXN0RGlzcGxhY2VtLCBfY29uZmlnJHJlc3RTcGVlZFRocmUsIF9jb25maWckdmVsb2NpdHksIF9jb25maWckdmVsb2NpdHkyLCBfY29uZmlnJGRlbGF5LCBfY29uZmlnJGlzSW50ZXJhY3Rpb24sIF9jb25maWckaXRlcmF0aW9ucztcblxuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX0FuaW1hdGlvbi5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgX3RoaXMuX292ZXJzaG9vdENsYW1waW5nID0gKF9jb25maWckb3ZlcnNob290Q2xhbSA9IGNvbmZpZy5vdmVyc2hvb3RDbGFtcGluZykgIT09IG51bGwgJiYgX2NvbmZpZyRvdmVyc2hvb3RDbGFtICE9PSB2b2lkIDAgPyBfY29uZmlnJG92ZXJzaG9vdENsYW0gOiBmYWxzZTtcbiAgICBfdGhpcy5fcmVzdERpc3BsYWNlbWVudFRocmVzaG9sZCA9IChfY29uZmlnJHJlc3REaXNwbGFjZW0gPSBjb25maWcucmVzdERpc3BsYWNlbWVudFRocmVzaG9sZCkgIT09IG51bGwgJiYgX2NvbmZpZyRyZXN0RGlzcGxhY2VtICE9PSB2b2lkIDAgPyBfY29uZmlnJHJlc3REaXNwbGFjZW0gOiAwLjAwMTtcbiAgICBfdGhpcy5fcmVzdFNwZWVkVGhyZXNob2xkID0gKF9jb25maWckcmVzdFNwZWVkVGhyZSA9IGNvbmZpZy5yZXN0U3BlZWRUaHJlc2hvbGQpICE9PSBudWxsICYmIF9jb25maWckcmVzdFNwZWVkVGhyZSAhPT0gdm9pZCAwID8gX2NvbmZpZyRyZXN0U3BlZWRUaHJlIDogMC4wMDE7XG4gICAgX3RoaXMuX2luaXRpYWxWZWxvY2l0eSA9IChfY29uZmlnJHZlbG9jaXR5ID0gY29uZmlnLnZlbG9jaXR5KSAhPT0gbnVsbCAmJiBfY29uZmlnJHZlbG9jaXR5ICE9PSB2b2lkIDAgPyBfY29uZmlnJHZlbG9jaXR5IDogMDtcbiAgICBfdGhpcy5fbGFzdFZlbG9jaXR5ID0gKF9jb25maWckdmVsb2NpdHkyID0gY29uZmlnLnZlbG9jaXR5KSAhPT0gbnVsbCAmJiBfY29uZmlnJHZlbG9jaXR5MiAhPT0gdm9pZCAwID8gX2NvbmZpZyR2ZWxvY2l0eTIgOiAwO1xuICAgIF90aGlzLl90b1ZhbHVlID0gY29uZmlnLnRvVmFsdWU7XG4gICAgX3RoaXMuX2RlbGF5ID0gKF9jb25maWckZGVsYXkgPSBjb25maWcuZGVsYXkpICE9PSBudWxsICYmIF9jb25maWckZGVsYXkgIT09IHZvaWQgMCA/IF9jb25maWckZGVsYXkgOiAwO1xuICAgIF90aGlzLl91c2VOYXRpdmVEcml2ZXIgPSAoMCwgX05hdGl2ZUFuaW1hdGVkSGVscGVyLnNob3VsZFVzZU5hdGl2ZURyaXZlcikoY29uZmlnKTtcbiAgICBfdGhpcy5fX2lzSW50ZXJhY3Rpb24gPSAoX2NvbmZpZyRpc0ludGVyYWN0aW9uID0gY29uZmlnLmlzSW50ZXJhY3Rpb24pICE9PSBudWxsICYmIF9jb25maWckaXNJbnRlcmFjdGlvbiAhPT0gdm9pZCAwID8gX2NvbmZpZyRpc0ludGVyYWN0aW9uIDogIV90aGlzLl91c2VOYXRpdmVEcml2ZXI7XG4gICAgX3RoaXMuX19pdGVyYXRpb25zID0gKF9jb25maWckaXRlcmF0aW9ucyA9IGNvbmZpZy5pdGVyYXRpb25zKSAhPT0gbnVsbCAmJiBfY29uZmlnJGl0ZXJhdGlvbnMgIT09IHZvaWQgMCA/IF9jb25maWckaXRlcmF0aW9ucyA6IDE7XG5cbiAgICBpZiAoY29uZmlnLnN0aWZmbmVzcyAhPT0gdW5kZWZpbmVkIHx8IGNvbmZpZy5kYW1waW5nICE9PSB1bmRlZmluZWQgfHwgY29uZmlnLm1hc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdmFyIF9jb25maWckc3RpZmZuZXNzLCBfY29uZmlnJGRhbXBpbmcsIF9jb25maWckbWFzcztcblxuICAgICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoY29uZmlnLmJvdW5jaW5lc3MgPT09IHVuZGVmaW5lZCAmJiBjb25maWcuc3BlZWQgPT09IHVuZGVmaW5lZCAmJiBjb25maWcudGVuc2lvbiA9PT0gdW5kZWZpbmVkICYmIGNvbmZpZy5mcmljdGlvbiA9PT0gdW5kZWZpbmVkLCAnWW91IGNhbiBkZWZpbmUgb25lIG9mIGJvdW5jaW5lc3Mvc3BlZWQsIHRlbnNpb24vZnJpY3Rpb24sIG9yIHN0aWZmbmVzcy9kYW1waW5nL21hc3MsIGJ1dCBub3QgbW9yZSB0aGFuIG9uZScpO1xuICAgICAgX3RoaXMuX3N0aWZmbmVzcyA9IChfY29uZmlnJHN0aWZmbmVzcyA9IGNvbmZpZy5zdGlmZm5lc3MpICE9PSBudWxsICYmIF9jb25maWckc3RpZmZuZXNzICE9PSB2b2lkIDAgPyBfY29uZmlnJHN0aWZmbmVzcyA6IDEwMDtcbiAgICAgIF90aGlzLl9kYW1waW5nID0gKF9jb25maWckZGFtcGluZyA9IGNvbmZpZy5kYW1waW5nKSAhPT0gbnVsbCAmJiBfY29uZmlnJGRhbXBpbmcgIT09IHZvaWQgMCA/IF9jb25maWckZGFtcGluZyA6IDEwO1xuICAgICAgX3RoaXMuX21hc3MgPSAoX2NvbmZpZyRtYXNzID0gY29uZmlnLm1hc3MpICE9PSBudWxsICYmIF9jb25maWckbWFzcyAhPT0gdm9pZCAwID8gX2NvbmZpZyRtYXNzIDogMTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5ib3VuY2luZXNzICE9PSB1bmRlZmluZWQgfHwgY29uZmlnLnNwZWVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHZhciBfY29uZmlnJGJvdW5jaW5lc3MsIF9jb25maWckc3BlZWQ7XG5cbiAgICAgIC8vIENvbnZlcnQgdGhlIG9yaWdhbWkgYm91bmNpbmVzcy9zcGVlZCB2YWx1ZXMgdG8gc3RpZmZuZXNzL2RhbXBpbmdcbiAgICAgIC8vIFdlIGFzc3VtZSBtYXNzIGlzIDEuXG4gICAgICAoMCwgX2ludmFyaWFudC5kZWZhdWx0KShjb25maWcudGVuc2lvbiA9PT0gdW5kZWZpbmVkICYmIGNvbmZpZy5mcmljdGlvbiA9PT0gdW5kZWZpbmVkICYmIGNvbmZpZy5zdGlmZm5lc3MgPT09IHVuZGVmaW5lZCAmJiBjb25maWcuZGFtcGluZyA9PT0gdW5kZWZpbmVkICYmIGNvbmZpZy5tYXNzID09PSB1bmRlZmluZWQsICdZb3UgY2FuIGRlZmluZSBvbmUgb2YgYm91bmNpbmVzcy9zcGVlZCwgdGVuc2lvbi9mcmljdGlvbiwgb3Igc3RpZmZuZXNzL2RhbXBpbmcvbWFzcywgYnV0IG5vdCBtb3JlIHRoYW4gb25lJyk7XG5cbiAgICAgIHZhciBzcHJpbmdDb25maWcgPSBfU3ByaW5nQ29uZmlnLmRlZmF1bHQuZnJvbUJvdW5jaW5lc3NBbmRTcGVlZCgoX2NvbmZpZyRib3VuY2luZXNzID0gY29uZmlnLmJvdW5jaW5lc3MpICE9PSBudWxsICYmIF9jb25maWckYm91bmNpbmVzcyAhPT0gdm9pZCAwID8gX2NvbmZpZyRib3VuY2luZXNzIDogOCwgKF9jb25maWckc3BlZWQgPSBjb25maWcuc3BlZWQpICE9PSBudWxsICYmIF9jb25maWckc3BlZWQgIT09IHZvaWQgMCA/IF9jb25maWckc3BlZWQgOiAxMik7XG5cbiAgICAgIF90aGlzLl9zdGlmZm5lc3MgPSBzcHJpbmdDb25maWcuc3RpZmZuZXNzO1xuICAgICAgX3RoaXMuX2RhbXBpbmcgPSBzcHJpbmdDb25maWcuZGFtcGluZztcbiAgICAgIF90aGlzLl9tYXNzID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIF9jb25maWckdGVuc2lvbiwgX2NvbmZpZyRmcmljdGlvbjtcblxuICAgICAgLy8gQ29udmVydCB0aGUgb3JpZ2FtaSB0ZW5zaW9uL2ZyaWN0aW9uIHZhbHVlcyB0byBzdGlmZm5lc3MvZGFtcGluZ1xuICAgICAgLy8gV2UgYXNzdW1lIG1hc3MgaXMgMS5cbiAgICAgIHZhciBfc3ByaW5nQ29uZmlnID0gX1NwcmluZ0NvbmZpZy5kZWZhdWx0LmZyb21PcmlnYW1pVGVuc2lvbkFuZEZyaWN0aW9uKChfY29uZmlnJHRlbnNpb24gPSBjb25maWcudGVuc2lvbikgIT09IG51bGwgJiYgX2NvbmZpZyR0ZW5zaW9uICE9PSB2b2lkIDAgPyBfY29uZmlnJHRlbnNpb24gOiA0MCwgKF9jb25maWckZnJpY3Rpb24gPSBjb25maWcuZnJpY3Rpb24pICE9PSBudWxsICYmIF9jb25maWckZnJpY3Rpb24gIT09IHZvaWQgMCA/IF9jb25maWckZnJpY3Rpb24gOiA3KTtcblxuICAgICAgX3RoaXMuX3N0aWZmbmVzcyA9IF9zcHJpbmdDb25maWcuc3RpZmZuZXNzO1xuICAgICAgX3RoaXMuX2RhbXBpbmcgPSBfc3ByaW5nQ29uZmlnLmRhbXBpbmc7XG4gICAgICBfdGhpcy5fbWFzcyA9IDE7XG4gICAgfVxuXG4gICAgKDAsIF9pbnZhcmlhbnQuZGVmYXVsdCkoX3RoaXMuX3N0aWZmbmVzcyA+IDAsICdTdGlmZm5lc3MgdmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpO1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKF90aGlzLl9kYW1waW5nID4gMCwgJ0RhbXBpbmcgdmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpO1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKF90aGlzLl9tYXNzID4gMCwgJ01hc3MgdmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIHZhciBfcHJvdG8gPSBTcHJpbmdBbmltYXRpb24ucHJvdG90eXBlO1xuXG4gIF9wcm90by5fX2dldE5hdGl2ZUFuaW1hdGlvbkNvbmZpZyA9IGZ1bmN0aW9uIF9fZ2V0TmF0aXZlQW5pbWF0aW9uQ29uZmlnKCkge1xuICAgIHZhciBfdGhpcyRfaW5pdGlhbFZlbG9jaXQ7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3NwcmluZycsXG4gICAgICBvdmVyc2hvb3RDbGFtcGluZzogdGhpcy5fb3ZlcnNob290Q2xhbXBpbmcsXG4gICAgICByZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkOiB0aGlzLl9yZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkLFxuICAgICAgcmVzdFNwZWVkVGhyZXNob2xkOiB0aGlzLl9yZXN0U3BlZWRUaHJlc2hvbGQsXG4gICAgICBzdGlmZm5lc3M6IHRoaXMuX3N0aWZmbmVzcyxcbiAgICAgIGRhbXBpbmc6IHRoaXMuX2RhbXBpbmcsXG4gICAgICBtYXNzOiB0aGlzLl9tYXNzLFxuICAgICAgaW5pdGlhbFZlbG9jaXR5OiAoX3RoaXMkX2luaXRpYWxWZWxvY2l0ID0gdGhpcy5faW5pdGlhbFZlbG9jaXR5KSAhPT0gbnVsbCAmJiBfdGhpcyRfaW5pdGlhbFZlbG9jaXQgIT09IHZvaWQgMCA/IF90aGlzJF9pbml0aWFsVmVsb2NpdCA6IHRoaXMuX2xhc3RWZWxvY2l0eSxcbiAgICAgIHRvVmFsdWU6IHRoaXMuX3RvVmFsdWUsXG4gICAgICBpdGVyYXRpb25zOiB0aGlzLl9faXRlcmF0aW9uc1xuICAgIH07XG4gIH07XG5cbiAgX3Byb3RvLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoZnJvbVZhbHVlLCBvblVwZGF0ZSwgb25FbmQsIHByZXZpb3VzQW5pbWF0aW9uLCBhbmltYXRlZFZhbHVlKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICB0aGlzLl9fYWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLl9zdGFydFBvc2l0aW9uID0gZnJvbVZhbHVlO1xuICAgIHRoaXMuX2xhc3RQb3NpdGlvbiA9IHRoaXMuX3N0YXJ0UG9zaXRpb247XG4gICAgdGhpcy5fb25VcGRhdGUgPSBvblVwZGF0ZTtcbiAgICB0aGlzLl9fb25FbmQgPSBvbkVuZDtcbiAgICB0aGlzLl9sYXN0VGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5fZnJhbWVUaW1lID0gMC4wO1xuXG4gICAgaWYgKHByZXZpb3VzQW5pbWF0aW9uIGluc3RhbmNlb2YgU3ByaW5nQW5pbWF0aW9uKSB7XG4gICAgICB2YXIgaW50ZXJuYWxTdGF0ZSA9IHByZXZpb3VzQW5pbWF0aW9uLmdldEludGVybmFsU3RhdGUoKTtcbiAgICAgIHRoaXMuX2xhc3RQb3NpdGlvbiA9IGludGVybmFsU3RhdGUubGFzdFBvc2l0aW9uO1xuICAgICAgdGhpcy5fbGFzdFZlbG9jaXR5ID0gaW50ZXJuYWxTdGF0ZS5sYXN0VmVsb2NpdHk7IC8vIFNldCB0aGUgaW5pdGlhbCB2ZWxvY2l0eSB0byB0aGUgbGFzdCB2ZWxvY2l0eVxuXG4gICAgICB0aGlzLl9pbml0aWFsVmVsb2NpdHkgPSB0aGlzLl9sYXN0VmVsb2NpdHk7XG4gICAgICB0aGlzLl9sYXN0VGltZSA9IGludGVybmFsU3RhdGUubGFzdFRpbWU7XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICBpZiAoX3RoaXMyLl91c2VOYXRpdmVEcml2ZXIpIHtcbiAgICAgICAgX3RoaXMyLl9fc3RhcnROYXRpdmVBbmltYXRpb24oYW5pbWF0ZWRWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpczIub25VcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9OyAvLyAgSWYgdGhpcy5fZGVsYXkgaXMgbW9yZSB0aGFuIDAsIHdlIHN0YXJ0IGFmdGVyIHRoZSB0aW1lb3V0LlxuXG5cbiAgICBpZiAodGhpcy5fZGVsYXkpIHtcbiAgICAgIHRoaXMuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KHN0YXJ0LCB0aGlzLl9kZWxheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXJ0KCk7XG4gICAgfVxuICB9O1xuXG4gIF9wcm90by5nZXRJbnRlcm5hbFN0YXRlID0gZnVuY3Rpb24gZ2V0SW50ZXJuYWxTdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGFzdFBvc2l0aW9uOiB0aGlzLl9sYXN0UG9zaXRpb24sXG4gICAgICBsYXN0VmVsb2NpdHk6IHRoaXMuX2xhc3RWZWxvY2l0eSxcbiAgICAgIGxhc3RUaW1lOiB0aGlzLl9sYXN0VGltZVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFRoaXMgc3ByaW5nIG1vZGVsIGlzIGJhc2VkIG9mZiBvZiBhIGRhbXBlZCBoYXJtb25pYyBvc2NpbGxhdG9yXG4gICAqIChodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IYXJtb25pY19vc2NpbGxhdG9yI0RhbXBlZF9oYXJtb25pY19vc2NpbGxhdG9yKS5cbiAgICpcbiAgICogV2UgdXNlIHRoZSBjbG9zZWQgZm9ybSBvZiB0aGUgc2Vjb25kIG9yZGVyIGRpZmZlcmVudGlhbCBlcXVhdGlvbjpcbiAgICpcbiAgICogeCcnICsgKDLOtuKNtV8wKXgnICsg4o21XjJ4ID0gMFxuICAgKlxuICAgKiB3aGVyZVxuICAgKiAgICDijbVfMCA9IOKImihrIC8gbSkgKHVuZGFtcGVkIGFuZ3VsYXIgZnJlcXVlbmN5IG9mIHRoZSBvc2NpbGxhdG9yKSxcbiAgICogICAgzrYgPSBjIC8gMuKImm1rIChkYW1waW5nIHJhdGlvKSxcbiAgICogICAgYyA9IGRhbXBpbmcgY29uc3RhbnRcbiAgICogICAgayA9IHN0aWZmbmVzc1xuICAgKiAgICBtID0gbWFzc1xuICAgKlxuICAgKiBUaGUgZGVyaXZhdGlvbiBvZiB0aGUgY2xvc2VkIGZvcm0gaXMgZGVzY3JpYmVkIGluIGRldGFpbCBoZXJlOlxuICAgKiBodHRwOi8vcGxhbmV0bWF0aC5vcmcvc2l0ZXMvZGVmYXVsdC9maWxlcy90ZXhwZGYvMzk3NDUucGRmXG4gICAqXG4gICAqIFRoaXMgYWxnb3JpdGhtIGhhcHBlbnMgdG8gbWF0Y2ggdGhlIGFsZ29yaXRobSB1c2VkIGJ5IENBU3ByaW5nQW5pbWF0aW9uLFxuICAgKiBhIFF1YXJ0ekNvcmUgKGlPUykgQVBJIHRoYXQgY3JlYXRlcyBzcHJpbmcgYW5pbWF0aW9ucy5cbiAgICovXG4gIDtcblxuICBfcHJvdG8ub25VcGRhdGUgPSBmdW5jdGlvbiBvblVwZGF0ZSgpIHtcbiAgICAvLyBJZiBmb3Igc29tZSByZWFzb24gd2UgbG9zdCBhIGxvdCBvZiBmcmFtZXMgKGUuZy4gcHJvY2VzcyBsYXJnZSBwYXlsb2FkIG9yXG4gICAgLy8gc3RvcHBlZCBpbiB0aGUgZGVidWdnZXIpLCB3ZSBvbmx5IGFkdmFuY2UgYnkgNCBmcmFtZXMgd29ydGggb2ZcbiAgICAvLyBjb21wdXRhdGlvbiBhbmQgd2lsbCBjb250aW51ZSBvbiB0aGUgbmV4dCBmcmFtZS4gSXQncyBiZXR0ZXIgdG8gaGF2ZSBpdFxuICAgIC8vIHJ1bm5pbmcgYXQgZmFzdGVyIHNwZWVkIHRoYW4ganVtcGluZyB0byB0aGUgZW5kLlxuICAgIHZhciBNQVhfU1RFUFMgPSA2NDtcbiAgICB2YXIgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIGlmIChub3cgPiB0aGlzLl9sYXN0VGltZSArIE1BWF9TVEVQUykge1xuICAgICAgbm93ID0gdGhpcy5fbGFzdFRpbWUgKyBNQVhfU1RFUFM7XG4gICAgfVxuXG4gICAgdmFyIGRlbHRhVGltZSA9IChub3cgLSB0aGlzLl9sYXN0VGltZSkgLyAxMDAwO1xuICAgIHRoaXMuX2ZyYW1lVGltZSArPSBkZWx0YVRpbWU7XG4gICAgdmFyIGMgPSB0aGlzLl9kYW1waW5nO1xuICAgIHZhciBtID0gdGhpcy5fbWFzcztcbiAgICB2YXIgayA9IHRoaXMuX3N0aWZmbmVzcztcbiAgICB2YXIgdjAgPSAtdGhpcy5faW5pdGlhbFZlbG9jaXR5O1xuICAgIHZhciB6ZXRhID0gYyAvICgyICogTWF0aC5zcXJ0KGsgKiBtKSk7IC8vIGRhbXBpbmcgcmF0aW9cblxuICAgIHZhciBvbWVnYTAgPSBNYXRoLnNxcnQoayAvIG0pOyAvLyB1bmRhbXBlZCBhbmd1bGFyIGZyZXF1ZW5jeSBvZiB0aGUgb3NjaWxsYXRvciAocmFkL21zKVxuXG4gICAgdmFyIG9tZWdhMSA9IG9tZWdhMCAqIE1hdGguc3FydCgxLjAgLSB6ZXRhICogemV0YSk7IC8vIGV4cG9uZW50aWFsIGRlY2F5XG5cbiAgICB2YXIgeDAgPSB0aGlzLl90b1ZhbHVlIC0gdGhpcy5fc3RhcnRQb3NpdGlvbjsgLy8gY2FsY3VsYXRlIHRoZSBvc2NpbGxhdGlvbiBmcm9tIHgwID0gMSB0byB4ID0gMFxuXG4gICAgdmFyIHBvc2l0aW9uID0gMC4wO1xuICAgIHZhciB2ZWxvY2l0eSA9IDAuMDtcbiAgICB2YXIgdCA9IHRoaXMuX2ZyYW1lVGltZTtcblxuICAgIGlmICh6ZXRhIDwgMSkge1xuICAgICAgLy8gVW5kZXIgZGFtcGVkXG4gICAgICB2YXIgZW52ZWxvcGUgPSBNYXRoLmV4cCgtemV0YSAqIG9tZWdhMCAqIHQpO1xuICAgICAgcG9zaXRpb24gPSB0aGlzLl90b1ZhbHVlIC0gZW52ZWxvcGUgKiAoKHYwICsgemV0YSAqIG9tZWdhMCAqIHgwKSAvIG9tZWdhMSAqIE1hdGguc2luKG9tZWdhMSAqIHQpICsgeDAgKiBNYXRoLmNvcyhvbWVnYTEgKiB0KSk7IC8vIFRoaXMgbG9va3MgY3JhenkgLS0gaXQncyBhY3R1YWxseSBqdXN0IHRoZSBkZXJpdmF0aXZlIG9mIHRoZVxuICAgICAgLy8gb3NjaWxsYXRpb24gZnVuY3Rpb25cblxuICAgICAgdmVsb2NpdHkgPSB6ZXRhICogb21lZ2EwICogZW52ZWxvcGUgKiAoTWF0aC5zaW4ob21lZ2ExICogdCkgKiAodjAgKyB6ZXRhICogb21lZ2EwICogeDApIC8gb21lZ2ExICsgeDAgKiBNYXRoLmNvcyhvbWVnYTEgKiB0KSkgLSBlbnZlbG9wZSAqIChNYXRoLmNvcyhvbWVnYTEgKiB0KSAqICh2MCArIHpldGEgKiBvbWVnYTAgKiB4MCkgLSBvbWVnYTEgKiB4MCAqIE1hdGguc2luKG9tZWdhMSAqIHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQ3JpdGljYWxseSBkYW1wZWRcbiAgICAgIHZhciBfZW52ZWxvcGUgPSBNYXRoLmV4cCgtb21lZ2EwICogdCk7XG5cbiAgICAgIHBvc2l0aW9uID0gdGhpcy5fdG9WYWx1ZSAtIF9lbnZlbG9wZSAqICh4MCArICh2MCArIG9tZWdhMCAqIHgwKSAqIHQpO1xuICAgICAgdmVsb2NpdHkgPSBfZW52ZWxvcGUgKiAodjAgKiAodCAqIG9tZWdhMCAtIDEpICsgdCAqIHgwICogKG9tZWdhMCAqIG9tZWdhMCkpO1xuICAgIH1cblxuICAgIHRoaXMuX2xhc3RUaW1lID0gbm93O1xuICAgIHRoaXMuX2xhc3RQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgIHRoaXMuX2xhc3RWZWxvY2l0eSA9IHZlbG9jaXR5O1xuXG4gICAgdGhpcy5fb25VcGRhdGUocG9zaXRpb24pO1xuXG4gICAgaWYgKCF0aGlzLl9fYWN0aXZlKSB7XG4gICAgICAvLyBhIGxpc3RlbmVyIG1pZ2h0IGhhdmUgc3RvcHBlZCB1cyBpbiBfb25VcGRhdGVcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIENvbmRpdGlvbnMgZm9yIHN0b3BwaW5nIHRoZSBzcHJpbmcgYW5pbWF0aW9uXG5cblxuICAgIHZhciBpc092ZXJzaG9vdGluZyA9IGZhbHNlO1xuXG4gICAgaWYgKHRoaXMuX292ZXJzaG9vdENsYW1waW5nICYmIHRoaXMuX3N0aWZmbmVzcyAhPT0gMCkge1xuICAgICAgaWYgKHRoaXMuX3N0YXJ0UG9zaXRpb24gPCB0aGlzLl90b1ZhbHVlKSB7XG4gICAgICAgIGlzT3ZlcnNob290aW5nID0gcG9zaXRpb24gPiB0aGlzLl90b1ZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaXNPdmVyc2hvb3RpbmcgPSBwb3NpdGlvbiA8IHRoaXMuX3RvVmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGlzVmVsb2NpdHkgPSBNYXRoLmFicyh2ZWxvY2l0eSkgPD0gdGhpcy5fcmVzdFNwZWVkVGhyZXNob2xkO1xuXG4gICAgdmFyIGlzRGlzcGxhY2VtZW50ID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLl9zdGlmZm5lc3MgIT09IDApIHtcbiAgICAgIGlzRGlzcGxhY2VtZW50ID0gTWF0aC5hYnModGhpcy5fdG9WYWx1ZSAtIHBvc2l0aW9uKSA8PSB0aGlzLl9yZXN0RGlzcGxhY2VtZW50VGhyZXNob2xkO1xuICAgIH1cblxuICAgIGlmIChpc092ZXJzaG9vdGluZyB8fCBpc1ZlbG9jaXR5ICYmIGlzRGlzcGxhY2VtZW50KSB7XG4gICAgICBpZiAodGhpcy5fc3RpZmZuZXNzICE9PSAwKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0aGF0IHdlIGVuZCB1cCB3aXRoIGEgcm91bmQgdmFsdWVcbiAgICAgICAgdGhpcy5fbGFzdFBvc2l0aW9uID0gdGhpcy5fdG9WYWx1ZTtcbiAgICAgICAgdGhpcy5fbGFzdFZlbG9jaXR5ID0gMDtcblxuICAgICAgICB0aGlzLl9vblVwZGF0ZSh0aGlzLl90b1ZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fX2RlYm91bmNlZE9uRW5kKHtcbiAgICAgICAgZmluaXNoZWQ6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fYW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5vblVwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgfTtcblxuICBfcHJvdG8uc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgX0FuaW1hdGlvbi5wcm90b3R5cGUuc3RvcC5jYWxsKHRoaXMpO1xuXG4gICAgdGhpcy5fX2FjdGl2ZSA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KTtcbiAgICBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpO1xuXG4gICAgdGhpcy5fX2RlYm91bmNlZE9uRW5kKHtcbiAgICAgIGZpbmlzaGVkOiBmYWxzZVxuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBTcHJpbmdBbmltYXRpb247XG59KF9BbmltYXRpb24yLmRlZmF1bHQpO1xuXG52YXIgX2RlZmF1bHQgPSBTcHJpbmdBbmltYXRpb247XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cy5kZWZhdWx0OyJdLCJtYXBwaW5ncyI6IkFBU0EsWUFBWTs7QUFFWkEsT0FBTyxDQUFDQyxVQUFVLEdBQUcsSUFBSTtBQUN6QkQsT0FBTyxDQUFDRSxPQUFPLEdBQUcsS0FBSyxDQUFDO0FBRXhCLElBQUlDLGNBQWMsR0FBR0Msc0JBQXNCLENBQUNDLE9BQU8seUJBQXlCLENBQUMsQ0FBQztBQUU5RSxJQUFJQyxnQkFBZ0IsR0FBR0Ysc0JBQXNCLENBQUNDLE9BQU8sMkJBQTJCLENBQUMsQ0FBQztBQUVsRixJQUFJRSxzQkFBc0IsR0FBR0gsc0JBQXNCLENBQUNDLE9BQU8saUNBQWlDLENBQUMsQ0FBQztB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