{"version":3,"names":["exports","__esModule","default","createStyleResolver","_ExecutionEnvironment","require","_createCSSStyleSheet","_interopRequireDefault","_createCompileableStyle","_createOrderedCSSStyleSheet","_flattenArray","_flattenStyle","_I18nManager","_i18nStyle","_compile","_initialRules","_modality","_constants","obj","inserted","sheet","cache","resolved","css","ltr","rtl","rtlNoSwap","init","STYLE_ELEMENT_ID","rule","insert","STYLE_GROUPS","modality","forEach","reset","addToCache","className","prop","value","getClassName","val","stringifyValueWithProperty","hasOwnProperty","_injectRegisteredStyle","id","_I18nManager$getConst","getConstants","doLeftAndRightSwapInRTL","isRTL","dir","style","results","atomic","Object","keys","key","_results$key","identifier","property","rules","group","custom","resolve","classList","nextClassList","props","Array","isArray","item","push","createCacheKey","_resolveStyle","flatArray","isArrayOfNumbers","cacheKey","i","length","_key","apply","finalProps","classListToString","_I18nManager$getConst2","flatStyle","localizedStyle","sort","reduce","styleProp","_atomic","a","_a$key","inline","getStyleSheet","textContent","getTextContent","canUseDOM","createCSS","result","name","compiled","classic","_compiled$key","prefix","list","join","trim","module"],"sources":["createStyleResolver.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = createStyleResolver;\n\nvar _ExecutionEnvironment = require(\"fbjs/lib/ExecutionEnvironment\");\n\nvar _createCSSStyleSheet = _interopRequireDefault(require(\"./createCSSStyleSheet\"));\n\nvar _createCompileableStyle = _interopRequireDefault(require(\"./createCompileableStyle\"));\n\nvar _createOrderedCSSStyleSheet = _interopRequireDefault(require(\"./createOrderedCSSStyleSheet\"));\n\nvar _flattenArray = _interopRequireDefault(require(\"../../modules/flattenArray\"));\n\nvar _flattenStyle = _interopRequireDefault(require(\"./flattenStyle\"));\n\nvar _I18nManager = _interopRequireDefault(require(\"../I18nManager\"));\n\nvar _i18nStyle = _interopRequireDefault(require(\"./i18nStyle\"));\n\nvar _compile = require(\"./compile\");\n\nvar _initialRules = _interopRequireDefault(require(\"./initialRules\"));\n\nvar _modality = _interopRequireDefault(require(\"./modality\"));\n\nvar _constants = require(\"./constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Copyright (c) Nicolas Gallagher.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\n/**\n * WARNING: changes to this file in particular can cause significant changes to\n * the results of render performance benchmarks.\n */\nfunction createStyleResolver() {\n  var inserted, sheet, cache;\n  var resolved = {\n    css: {},\n    ltr: {},\n    rtl: {},\n    rtlNoSwap: {}\n  };\n\n  var init = function init() {\n    inserted = {\n      css: {},\n      ltr: {},\n      rtl: {},\n      rtlNoSwap: {}\n    };\n    sheet = (0, _createOrderedCSSStyleSheet.default)((0, _createCSSStyleSheet.default)(_constants.STYLE_ELEMENT_ID));\n    cache = {};\n    (0, _modality.default)(function (rule) {\n      return sheet.insert(rule, _constants.STYLE_GROUPS.modality);\n    });\n\n    _initialRules.default.forEach(function (rule) {\n      sheet.insert(rule, _constants.STYLE_GROUPS.reset);\n    });\n  };\n\n  init();\n\n  function addToCache(className, prop, value) {\n    if (!cache[prop]) {\n      cache[prop] = {};\n    }\n\n    cache[prop][value] = className;\n  }\n\n  function getClassName(prop, value) {\n    var val = (0, _compile.stringifyValueWithProperty)(value, prop);\n    return cache[prop] && cache[prop].hasOwnProperty(val) && cache[prop][val];\n  }\n\n  function _injectRegisteredStyle(id) {\n    var _I18nManager$getConst = _I18nManager.default.getConstants(),\n        doLeftAndRightSwapInRTL = _I18nManager$getConst.doLeftAndRightSwapInRTL,\n        isRTL = _I18nManager$getConst.isRTL;\n\n    var dir = isRTL ? doLeftAndRightSwapInRTL ? 'rtl' : 'rtlNoSwap' : 'ltr';\n\n    if (!inserted[dir][id]) {\n      var style = (0, _createCompileableStyle.default)((0, _i18nStyle.default)((0, _flattenStyle.default)(id)));\n      var results = (0, _compile.atomic)(style);\n      Object.keys(results).forEach(function (key) {\n        var _results$key = results[key],\n            identifier = _results$key.identifier,\n            property = _results$key.property,\n            rules = _results$key.rules,\n            value = _results$key.value;\n        addToCache(identifier, property, value);\n        rules.forEach(function (rule) {\n          var group = _constants.STYLE_GROUPS.custom[property] || _constants.STYLE_GROUPS.atomic;\n          sheet.insert(rule, group);\n        });\n      });\n      inserted[dir][id] = true;\n    }\n  }\n  /**\n   * Resolves a React Native style object to DOM attributes\n   */\n\n\n  function resolve(style, classList) {\n    var nextClassList = [];\n    var props = {};\n\n    if (!style && !classList) {\n      return props;\n    }\n\n    if (Array.isArray(classList)) {\n      (0, _flattenArray.default)(classList).forEach(function (identifier) {\n        if (identifier) {\n          if (inserted.css[identifier] == null && resolved.css[identifier] != null) {\n            var item = resolved.css[identifier];\n            item.rules.forEach(function (rule) {\n              sheet.insert(rule, item.group);\n            });\n            inserted.css[identifier] = true;\n          }\n\n          nextClassList.push(identifier);\n        }\n      });\n    }\n\n    if (typeof style === 'number') {\n      // fast and cachable\n      _injectRegisteredStyle(style);\n\n      var key = createCacheKey(style);\n      props = _resolveStyle(style, key);\n    } else if (!Array.isArray(style)) {\n      // resolve a plain RN style object\n      props = _resolveStyle(style);\n    } else {\n      // flatten the style array\n      // cache resolved props when all styles are registered\n      // otherwise fallback to resolving\n      var flatArray = (0, _flattenArray.default)(style);\n      var isArrayOfNumbers = true;\n      var cacheKey = '';\n\n      for (var i = 0; i < flatArray.length; i++) {\n        var id = flatArray[i];\n\n        if (typeof id !== 'number') {\n          isArrayOfNumbers = false;\n        } else {\n          if (isArrayOfNumbers) {\n            cacheKey += id + '-';\n          }\n\n          _injectRegisteredStyle(id);\n        }\n      }\n\n      var _key = isArrayOfNumbers ? createCacheKey(cacheKey) : null;\n\n      props = _resolveStyle(flatArray, _key);\n    }\n\n    nextClassList.push.apply(nextClassList, props.classList);\n    var finalProps = {\n      className: classListToString(nextClassList),\n      classList: nextClassList\n    };\n\n    if (props.style) {\n      finalProps.style = props.style;\n    }\n\n    return finalProps;\n  }\n  /**\n   * Resolves a React Native style object\n   */\n\n\n  function _resolveStyle(style, key) {\n    var _I18nManager$getConst2 = _I18nManager.default.getConstants(),\n        doLeftAndRightSwapInRTL = _I18nManager$getConst2.doLeftAndRightSwapInRTL,\n        isRTL = _I18nManager$getConst2.isRTL;\n\n    var dir = isRTL ? doLeftAndRightSwapInRTL ? 'rtl' : 'rtlNoSwap' : 'ltr'; // faster: memoized\n\n    if (key != null && resolved[dir][key] != null) {\n      return resolved[dir][key];\n    }\n\n    var flatStyle = (0, _flattenStyle.default)(style);\n    var localizedStyle = (0, _createCompileableStyle.default)((0, _i18nStyle.default)(flatStyle)); // slower: convert style object to props and cache\n\n    var props = Object.keys(localizedStyle).sort().reduce(function (props, styleProp) {\n      var value = localizedStyle[styleProp];\n\n      if (value != null) {\n        var className = getClassName(styleProp, value);\n\n        if (className) {\n          props.classList.push(className);\n        } else {\n          // Certain properties and values are not transformed by 'createReactDOMStyle' as they\n          // require more complex transforms into multiple CSS rules. Here we assume that StyleManager\n          // can bind these styles to a className, and prevent them becoming invalid inline-styles.\n          if (styleProp === 'animationKeyframes' || styleProp === 'placeholderTextColor' || styleProp === 'pointerEvents' || styleProp === 'scrollbarWidth') {\n            var _atomic;\n\n            var a = (0, _compile.atomic)((_atomic = {}, _atomic[styleProp] = value, _atomic));\n            Object.keys(a).forEach(function (key) {\n              var _a$key = a[key],\n                  identifier = _a$key.identifier,\n                  rules = _a$key.rules;\n              props.classList.push(identifier);\n              rules.forEach(function (rule) {\n                sheet.insert(rule, _constants.STYLE_GROUPS.atomic);\n              });\n            });\n          } else {\n            if (!props.style) {\n              props.style = {};\n            } // 4x slower render\n\n\n            props.style[styleProp] = value;\n          }\n        }\n      }\n\n      return props;\n    }, {\n      classList: []\n    });\n\n    if (props.style) {\n      props.style = (0, _compile.inline)(props.style);\n    }\n\n    if (key != null) {\n      resolved[dir][key] = props;\n    }\n\n    return props;\n  }\n\n  return {\n    getStyleSheet: function getStyleSheet() {\n      var textContent = sheet.getTextContent(); // Reset state on the server so critical css is always the result\n\n      if (!_ExecutionEnvironment.canUseDOM) {\n        init();\n      }\n\n      return {\n        id: _constants.STYLE_ELEMENT_ID,\n        textContent: textContent\n      };\n    },\n    createCSS: function createCSS(rules, group) {\n      var result = {};\n      Object.keys(rules).forEach(function (name) {\n        var style = rules[name];\n        var compiled = (0, _compile.classic)(style, name);\n        Object.keys(compiled).forEach(function (key) {\n          var _compiled$key = compiled[key],\n              identifier = _compiled$key.identifier,\n              rules = _compiled$key.rules;\n          resolved.css[identifier] = {\n            group: group || _constants.STYLE_GROUPS.classic,\n            rules: rules\n          };\n          result[name] = identifier;\n        });\n      });\n      return result;\n    },\n    resolve: resolve,\n\n    get sheet() {\n      return sheet;\n    }\n\n  };\n}\n/**\n * Misc helpers\n */\n\n\nvar createCacheKey = function createCacheKey(id) {\n  var prefix = 'rn';\n  return prefix + \"-\" + id;\n};\n\nvar classListToString = function classListToString(list) {\n  return list.join(' ').trim();\n};\n\nmodule.exports = exports.default;"],"mappings":"AAAA,YAAY;;AAEZA,OAAO,CAACC,UAAU,GAAG,IAAI;AACzBD,OAAO,CAACE,OAAO,GAAGC,mBAAmB;AAErC,IAAIC,qBAAqB,GAAGC,OAAO,CAAC,+BAA+B,CAAC;AAEpE,IAAIC,oBAAoB,GAAGC,sBAAsB,CAACF,OAAO,wBAAwB,CAAC,CAAC;AAEnF,IAAIG,uBAAuB,GAAGD,sBAAsB,CAACF,OAAO,2BAA2B,CAAC,CAAC;AAEzF,IAAII,2BAA2B,GAAGF,sBAAsB,CAACF,OAAO,+BAA+B,CAAC,CAAC;AAEjG,IAAIK,aAAa,GAAGH,sBAAsB,CAACF,OAAO,6BAA6B,CAAC,CAAC;AAEjF,IAAIM,aAAa,GAAGJ,sBAAsB,CAACF,OAAO,iBAAiB,CAAC,CAAC;AAErE,IAAIO,YAAY,GAAGL,sBAAsB,CAACF,OAAO,iBAAiB,CAAC,CAAC;AAEpE,IAAIQ,UAAU,GAAGN,sBAAsB,CAACF,OAAO,cAAc,CAAC,CAAC;AAE/D,IAAIS,QAAQ,GAAGT,OAAO,YAAY,CAAC;AAEnC,IAAIU,aAAa,GAAGR,sBAAsB,CAACF,OAAO,iBAAiB,CAAC,CAAC;AAErE,IAAIW,SAAS,GAAGT,sBAAsB,CAACF,OAAO,aAAa,CAAC,CAAC;AAE7D,IAAIY,UAAU,GAAGZ,OAAO,cAAc,CAAC;AAEvC,SAASE,sBAAsBA,CAACW,GAAG,EAAE;EAAE,OAAOA,GAAG,IAAIA,GAAG,CAACjB,UAAU,GAAGiB,GAAG,GAAG;IAAEhB,OAAO,EAAEgB;EAAI,CAAC;AAAE;AAe9F,SAASf,mBAAmBA,CAAA,EAAG;EAC7B,IAAIgB,QAAQ,EAAEC,KAAK,EAAEC,KAAK;EAC1B,IAAIC,QAAQ,GAAG;IACbC,GAAG,EAAE,CAAC,CAAC;IACPC,GAAG,EAAE,CAAC,CAAC;IACPC,GAAG,EAAE,CAAC,CAAC;IACPC,SAAS,EAAE,CAAC;EACd,CAAC;EAED,IAAIC,IAAI,GAAG,SAASA,IAAIA,CAAA,EAAG;IACzBR,QAAQ,GAAG;MACTI,GAAG,EAAE,CAAC,CAAC;MACPC,GAAG,EAAE,CAAC,CAAC;MACPC,GAAG,EAAE,CAAC,CAAC;MACPC,SAAS,EAAE,CAAC;IACd,CAAC;IACDN,KAAK,GAAG,CAAC,CAAC,EAAEX,2BAA2B,CAACP,OAAO,EAAE,CAAC,CAAC,EAAEI,oBAAoB,CAACJ,OAAO,EAAEe,UAAU,CAACW,gBAAgB,CAAC,CAAC;IAChHP,KAAK,GAAG,CAAC,CAAC;IACV,CAAC,CAAC,EAAEL,SAAS,CAACd,OAAO,EAAE,UAAU2B,IAAI,EAAE;MACrC,OAAOT,KAAK,CAACU,MAAM,CAACD,IAAI,EAAEZ,UAAU,CAACc,YAAY,CAACC,QAAQ,CAAC;IAC7D,CAAC,CAAC;IAEFjB,aAAa,CAACb,OAAO,CAAC+B,OAAO,CAAC,UAAUJ,IAAI,EAAE;MAC5CT,KAAK,CAACU,MAAM,CAACD,IAAI,EAAEZ,UAAU,CAACc,YAAY,CAACG,KAAK,CAAC;IACnD,CAAC,CAAC;EACJ,CAAC;EAEDP,IAAI,CAAC,CAAC;EAEN,SAASQ,UAAUA,CAACC,SAAS,EAAEC,IAAI,EAAEC,KAAK,EAAE;IAC1C,IAAI,CAACjB,KAAK,CAACgB,IAAI,CAAC,EAAE;MAChBhB,KAAK,CAACgB,IAAI,CAAC,GAAG,CAAC,CAAC;IAClB;IAEAhB,KAAK,CAACgB,IAAI,CAAC,CAACC,KAAK,CAAC,GAAGF,SAAS;EAChC;EAEA,SAASG,YAAYA,CAACF,IAAI,EAAEC,KAAK,EAAE;IACjC,IAAIE,GAAG,GAAG,CAAC,CAAC,EAAE1B,QAAQ,CAAC2B,0BAA0B,EAAEH,KAAK,EAAED,IAAI,CAAC;IAC/D,OAAOhB,KAAK,CAACgB,IAAI,CAAC,IAAIhB,KAAK,CAACgB,IAAI,CAAC,CAACK,cAAc,CAACF,GAAG,CAAC,IAAInB,KAAK,CAACgB,IAAI,CAAC,CAACG,GAAG,CAAC;EAC3E;EAEA,SAASG,sBAAsBA,CAACC,EAAE,EAAE;IAClC,IAAIC,qBAAqB,GAAGjC,YAAY,CAACV,OAAO,CAAC4C,YAAY,CAAC,CAAC;MAC3DC,uBAAuB,GAAGF,qBAAqB,CAACE,uBAAuB;MACvEC,KAAK,GAAGH,qBAAqB,CAACG,KAAK;IAEvC,IAAIC,GAAG,GAAGD,KAAK,GAAGD,uBAAuB,GAAG,KAAK,GAAG,WAAW,GAAG,KAAK;IAEvE,IAAI,CAAC5B,QAAQ,CAAC8B,GAAG,CAAC,CAACL,EAAE,CAAC,EAAE;MACtB,IAAIM,KAAK,GAAG,CAAC,CAAC,EAAE1C,uBAAuB,CAACN,OAAO,EAAE,CAAC,CAAC,EAAEW,UAAU,CAACX,OAAO,EAAE,CAAC,CAAC,EAAES,aAAa,CAACT,OAAO,EAAE0C,EAAE,CAAC,CAAC,CAAC;MACzG,IAAIO,OAAO,GAAG,CAAC,CAAC,EAAErC,QAAQ,CAACsC,MAAM,EAAEF,KAAK,CAAC;MACzCG,MAAM,CAACC,IAAI,CAACH,OAAO,CAAC,CAAClB,OAAO,CAAC,UAAUsB,GAAG,EAAE;QAC1C,IAAIC,YAAY,GAAGL,OAAO,CAACI,GAAG,CAAC;UAC3BE,UAAU,GAAGD,YAAY,CAACC,UAAU;UACpCC,QAAQ,GAAGF,YAAY,CAACE,QAAQ;UAChCC,KAAK,GAAGH,YAAY,CAACG,KAAK;UAC1BrB,KAAK,GAAGkB,YAAY,CAAClB,KAAK;QAC9BH,UAAU,CAACsB,UAAU,EAAEC,QAAQ,EAAEpB,KAAK,CAAC;QACvCqB,KAAK,CAAC1B,OAAO,CAAC,UAAUJ,IAAI,EAAE;UAC5B,IAAI+B,KAAK,GAAG3C,UAAU,CAACc,YAAY,CAAC8B,MAAM,CAACH,QAAQ,CAAC,IAAIzC,UAAU,CAACc,YAAY,CAACqB,MAAM;UACtFhC,KAAK,CAACU,MAAM,CAACD,IAAI,EAAE+B,KAAK,CAAC;QAC3B,CAAC,CAAC;MACJ,CAAC,CAAC;MACFzC,QAAQ,CAAC8B,GAAG,CAAC,CAACL,EAAE,CAAC,GAAG,IAAI;IAC1B;EACF;EAMA,SAASkB,OAAOA,CAACZ,KAAK,EAAEa,SAAS,EAAE;IACjC,IAAIC,aAAa,GAAG,EAAE;IACtB,IAAIC,KAAK,GAAG,CAAC,CAAC;IAEd,IAAI,CAACf,KAAK,IAAI,CAACa,SAAS,EAAE;MACxB,OAAOE,KAAK;IACd;IAEA,IAAIC,KAAK,CAACC,OAAO,CAACJ,SAAS,CAAC,EAAE;MAC5B,CAAC,CAAC,EAAErD,aAAa,CAACR,OAAO,EAAE6D,SAAS,CAAC,CAAC9B,OAAO,CAAC,UAAUwB,UAAU,EAAE;QAClE,IAAIA,UAAU,EAAE;UACd,IAAItC,QAAQ,CAACI,GAAG,CAACkC,UAAU,CAAC,IAAI,IAAI,IAAInC,QAAQ,CAACC,GAAG,CAACkC,UAAU,CAAC,IAAI,IAAI,EAAE;YACxE,IAAIW,IAAI,GAAG9C,QAAQ,CAACC,GAAG,CAACkC,UAAU,CAAC;YACnCW,IAAI,CAACT,KAAK,CAAC1B,OAAO,CAAC,UAAUJ,IAAI,EAAE;cACjCT,KAAK,CAACU,MAAM,CAACD,IAAI,EAAEuC,IAAI,CAACR,KAAK,CAAC;YAChC,CAAC,CAAC;YACFzC,QAAQ,CAACI,GAAG,CAACkC,UAAU,CAAC,GAAG,IAAI;UACjC;UAEAO,aAAa,CAACK,IAAI,CAACZ,UAAU,CAAC;QAChC;MACF,CAAC,CAAC;IACJ;IAEA,IAAI,OAAOP,KAAK,KAAK,QAAQ,EAAE;MAE7BP,sBAAsB,CAACO,KAAK,CAAC;MAE7B,IAAIK,GAAG,GAAGe,cAAc,CAACpB,KAAK,CAAC;MAC/Be,KAAK,GAAGM,aAAa,CAACrB,KAAK,EAAEK,GAAG,CAAC;IACnC,CAAC,MAAM,IAAI,CAACW,KAAK,CAACC,OAAO,CAACjB,KAAK,CAAC,EAAE;MAEhCe,KAAK,GAAGM,aAAa,CAACrB,KAAK,CAAC;IAC9B,CAAC,MAAM;MAIL,IAAIsB,SAAS,GAAG,CAAC,CAAC,EAAE9D,aAAa,CAACR,OAAO,EAAEgD,KAAK,CAAC;MACjD,IAAIuB,gBAAgB,GAAG,IAAI;MAC3B,IAAIC,QAAQ,GAAG,EAAE;MAEjB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,SAAS,CAACI,MAAM,EAAED,CAAC,EAAE,EAAE;QACzC,IAAI/B,EAAE,GAAG4B,SAAS,CAACG,CAAC,CAAC;QAErB,IAAI,OAAO/B,EAAE,KAAK,QAAQ,EAAE;UAC1B6B,gBAAgB,GAAG,KAAK;QAC1B,CAAC,MAAM;UACL,IAAIA,gBAAgB,EAAE;YACpBC,QAAQ,IAAI9B,EAAE,GAAG,GAAG;UACtB;UAEAD,sBAAsB,CAACC,EAAE,CAAC;QAC5B;MACF;MAEA,IAAIiC,IAAI,GAAGJ,gBAAgB,GAAGH,cAAc,CAACI,QAAQ,CAAC,GAAG,IAAI;MAE7DT,KAAK,GAAGM,aAAa,CAACC,SAAS,EAAEK,IAAI,CAAC;IACxC;IAEAb,aAAa,CAACK,IAAI,CAACS,KAAK,CAACd,aAAa,EAAEC,KAAK,CAACF,SAAS,CAAC;IACxD,IAAIgB,UAAU,GAAG;MACf3C,SAAS,EAAE4C,iBAAiB,CAAChB,aAAa,CAAC;MAC3CD,SAAS,EAAEC;IACb,CAAC;IAED,IAAIC,KAAK,CAACf,KAAK,EAAE;MACf6B,UAAU,CAAC7B,KAAK,GAAGe,KAAK,CAACf,KAAK;IAChC;IAEA,OAAO6B,UAAU;EACnB;EAMA,SAASR,aAAaA,CAACrB,KAAK,EAAEK,GAAG,EAAE;IACjC,IAAI0B,sBAAsB,GAAGrE,YAAY,CAACV,OAAO,CAAC4C,YAAY,CAAC,CAAC;MAC5DC,uBAAuB,GAAGkC,sBAAsB,CAAClC,uBAAuB;MACxEC,KAAK,GAAGiC,sBAAsB,CAACjC,KAAK;IAExC,IAAIC,GAAG,GAAGD,KAAK,GAAGD,uBAAuB,GAAG,KAAK,GAAG,WAAW,GAAG,KAAK;IAEvE,IAAIQ,GAAG,IAAI,IAAI,IAAIjC,QAAQ,CAAC2B,GAAG,CAAC,CAACM,GAAG,CAAC,IAAI,IAAI,EAAE;MAC7C,OAAOjC,QAAQ,CAAC2B,GAAG,CAAC,CAACM,GAAG,CAAC;IAC3B;IAEA,IAAI2B,SAAS,GAAG,CAAC,CAAC,EAAEvE,aAAa,CAACT,OAAO,EAAEgD,KAAK,CAAC;IACjD,IAAIiC,cAAc,GAAG,CAAC,CAAC,EAAE3E,uBAAuB,CAACN,OAAO,EAAE,CAAC,CAAC,EAAEW,UAAU,CAACX,OAAO,EAAEgF,SAAS,CAAC,CAAC;IAE7F,IAAIjB,KAAK,GAAGZ,MAAM,CAACC,IAAI,CAAC6B,cAAc,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,MAAM,CAAC,UAAUpB,KAAK,EAAEqB,SAAS,EAAE;MAChF,IAAIhD,KAAK,GAAG6C,cAAc,CAACG,SAAS,CAAC;MAErC,IAAIhD,KAAK,IAAI,IAAI,EAAE;QACjB,IAAIF,SAAS,GAAGG,YAAY,CAAC+C,SAAS,EAAEhD,KAAK,CAAC;QAE9C,IAAIF,SAAS,EAAE;UACb6B,KAAK,CAACF,SAAS,CAACM,IAAI,CAACjC,SAAS,CAAC;QACjC,CAAC,MAAM;UAIL,IAAIkD,SAAS,KAAK,oBAAoB,IAAIA,SAAS,KAAK,sBAAsB,IAAIA,SAAS,KAAK,eAAe,IAAIA,SAAS,KAAK,gBAAgB,EAAE;YACjJ,IAAIC,OAAO;YAEX,IAAIC,CAAC,GAAG,CAAC,CAAC,EAAE1E,QAAQ,CAACsC,MAAM,GAAGmC,OAAO,GAAG,CAAC,CAAC,EAAEA,OAAO,CAACD,SAAS,CAAC,GAAGhD,KAAK,EAAEiD,OAAO,CAAC,CAAC;YACjFlC,MAAM,CAACC,IAAI,CAACkC,CAAC,CAAC,CAACvD,OAAO,CAAC,UAAUsB,GAAG,EAAE;cACpC,IAAIkC,MAAM,GAAGD,CAAC,CAACjC,GAAG,CAAC;gBACfE,UAAU,GAAGgC,MAAM,CAAChC,UAAU;gBAC9BE,KAAK,GAAG8B,MAAM,CAAC9B,KAAK;cACxBM,KAAK,CAACF,SAAS,CAACM,IAAI,CAACZ,UAAU,CAAC;cAChCE,KAAK,CAAC1B,OAAO,CAAC,UAAUJ,IAAI,EAAE;gBAC5BT,KAAK,CAACU,MAAM,CAACD,IAAI,EAAEZ,UAAU,CAACc,YAAY,CAACqB,MAAM,CAAC;cACpD,CAAC,CAAC;YACJ,CAAC,CAAC;UACJ,CAAC,MAAM;YACL,IAAI,CAACa,KAAK,CAACf,KAAK,EAAE;cAChBe,KAAK,CAACf,KAAK,GAAG,CAAC,CAAC;YAClB;YAGAe,KAAK,CAACf,KAAK,CAACoC,SAAS,CAAC,GAAGhD,KAAK;UAChC;QACF;MACF;MAEA,OAAO2B,KAAK;IACd,CAAC,EAAE;MACDF,SAAS,EAAE;IACb,CAAC,CAAC;IAEF,IAAIE,KAAK,CAACf,KAAK,EAAE;MACfe,KAAK,CAACf,KAAK,GAAG,CAAC,CAAC,EAAEpC,QAAQ,CAAC4E,MAAM,EAAEzB,KAAK,CAACf,KAAK,CAAC;IACjD;IAEA,IAAIK,GAAG,IAAI,IAAI,EAAE;MACfjC,QAAQ,CAAC2B,GAAG,CAAC,CAACM,GAAG,CAAC,GAAGU,KAAK;IAC5B;IAEA,OAAOA,KAAK;EACd;EAEA,OAAO;IACL0B,aAAa,EAAE,SAASA,aAAaA,CAAA,EAAG;MACtC,IAAIC,WAAW,GAAGxE,KAAK,CAACyE,cAAc,CAAC,CAAC;MAExC,IAAI,CAACzF,qBAAqB,CAAC0F,SAAS,EAAE;QACpCnE,IAAI,CAAC,CAAC;MACR;MAEA,OAAO;QACLiB,EAAE,EAAE3B,UAAU,CAACW,gBAAgB;QAC/BgE,WAAW,EAAEA;MACf,CAAC;IACH,CAAC;IACDG,SAAS,EAAE,SAASA,SAASA,CAACpC,KAAK,EAAEC,KAAK,EAAE;MAC1C,IAAIoC,MAAM,GAAG,CAAC,CAAC;MACf3C,MAAM,CAACC,IAAI,CAACK,KAAK,CAAC,CAAC1B,OAAO,CAAC,UAAUgE,IAAI,EAAE;QACzC,IAAI/C,KAAK,GAAGS,KAAK,CAACsC,IAAI,CAAC;QACvB,IAAIC,QAAQ,GAAG,CAAC,CAAC,EAAEpF,QAAQ,CAACqF,OAAO,EAAEjD,KAAK,EAAE+C,IAAI,CAAC;QACjD5C,MAAM,CAACC,IAAI,CAAC4C,QAAQ,CAAC,CAACjE,OAAO,CAAC,UAAUsB,GAAG,EAAE;UAC3C,IAAI6C,aAAa,GAAGF,QAAQ,CAAC3C,GAAG,CAAC;YAC7BE,UAAU,GAAG2C,aAAa,CAAC3C,UAAU;YACrCE,KAAK,GAAGyC,aAAa,CAACzC,KAAK;UAC/BrC,QAAQ,CAACC,GAAG,CAACkC,UAAU,CAAC,GAAG;YACzBG,KAAK,EAAEA,KAAK,IAAI3C,UAAU,CAACc,YAAY,CAACoE,OAAO;YAC/CxC,KAAK,EAAEA;UACT,CAAC;UACDqC,MAAM,CAACC,IAAI,CAAC,GAAGxC,UAAU;QAC3B,CAAC,CAAC;MACJ,CAAC,CAAC;MACF,OAAOuC,MAAM;IACf,CAAC;IACDlC,OAAO,EAAEA,OAAO;IAEhB,IAAI1C,KAAKA,CAAA,EAAG;MACV,OAAOA,KAAK;IACd;EAEF,CAAC;AACH;AAMA,IAAIkD,cAAc,GAAG,SAASA,cAAcA,CAAC1B,EAAE,EAAE;EAC/C,IAAIyD,MAAM,GAAG,IAAI;EACjB,OAAOA,MAAM,GAAG,GAAG,GAAGzD,EAAE;AAC1B,CAAC;AAED,IAAIoC,iBAAiB,GAAG,SAASA,iBAAiBA,CAACsB,IAAI,EAAE;EACvD,OAAOA,IAAI,CAACC,IAAI,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC;AAC9B,CAAC;AAEDC,MAAM,CAACzG,OAAO,GAAGA,OAAO,CAACE,OAAO","ignoreList":[]}