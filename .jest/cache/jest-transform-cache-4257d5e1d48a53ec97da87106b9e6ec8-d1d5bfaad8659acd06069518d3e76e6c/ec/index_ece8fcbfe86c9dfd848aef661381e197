efcccc51602b374fa77480d52a5f56c5
"use strict";

exports.__esModule = true;
exports.default = void 0;
var _ExecutionEnvironment = require("fbjs/lib/ExecutionEnvironment");
var _invariant = _interopRequireDefault(require("fbjs/lib/invariant"));
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
var dimensions = {
  window: {
    fontScale: 1,
    height: 0,
    scale: 1,
    width: 0
  },
  screen: {
    fontScale: 1,
    height: 0,
    scale: 1,
    width: 0
  }
};
var listeners = {};
var Dimensions = function () {
  function Dimensions() {}
  Dimensions.get = function get(dimension) {
    (0, _invariant.default)(dimensions[dimension], "No dimension set for key " + dimension);
    return dimensions[dimension];
  };
  Dimensions.set = function set(initialDimensions) {
    if (initialDimensions) {
      if (_ExecutionEnvironment.canUseDOM) {
        (0, _invariant.default)(false, 'Dimensions cannot be set in the browser');
      } else {
        if (initialDimensions.screen != null) {
          dimensions.screen = initialDimensions.screen;
        }
        if (initialDimensions.window != null) {
          dimensions.window = initialDimensions.window;
        }
      }
    }
  };
  Dimensions._update = function _update() {
    if (!_ExecutionEnvironment.canUseDOM) {
      return;
    }
    var win = window;
    var docEl = win.document.documentElement;
    dimensions.window = {
      fontScale: 1,
      height: docEl.clientHeight,
      scale: win.devicePixelRatio || 1,
      width: docEl.clientWidth
    };
    dimensions.screen = {
      fontScale: 1,
      height: win.screen.height,
      scale: win.devicePixelRatio || 1,
      width: win.screen.width
    };
    if (Array.isArray(listeners['change'])) {
      listeners['change'].forEach(function (handler) {
        return handler(dimensions);
      });
    }
  };
  Dimensions.addEventListener = function addEventListener(type, handler) {
    listeners[type] = listeners[type] || [];
    listeners[type].push(handler);
  };
  Dimensions.removeEventListener = function removeEventListener(type, handler) {
    if (Array.isArray(listeners[type])) {
      listeners[type] = listeners[type].filter(function (_handler) {
        return _handler !== handler;
      });
    }
  };
  return Dimensions;
}();
exports.default = Dimensions;
if (_ExecutionEnvironment.canUseDOM) {
  Dimensions._update();
  window.addEventListener('resize', Dimensions._update, false);
}
module.exports = exports.default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHBvcnRzIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfRXhlY3V0aW9uRW52aXJvbm1lbnQiLCJyZXF1aXJlIiwiX2ludmFyaWFudCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJkaW1lbnNpb25zIiwid2luZG93IiwiZm9udFNjYWxlIiwiaGVpZ2h0Iiwic2NhbGUiLCJ3aWR0aCIsInNjcmVlbiIsImxpc3RlbmVycyIsIkRpbWVuc2lvbnMiLCJnZXQiLCJkaW1lbnNpb24iLCJzZXQiLCJpbml0aWFsRGltZW5zaW9ucyIsImNhblVzZURPTSIsIl91cGRhdGUiLCJ3aW4iLCJkb2NFbCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiZGV2aWNlUGl4ZWxSYXRpbyIsImNsaWVudFdpZHRoIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsImhhbmRsZXIiLCJhZGRFdmVudExpc3RlbmVyIiwidHlwZSIsInB1c2giLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZmlsdGVyIiwiX2hhbmRsZXIiLCJtb2R1bGUiXSwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDtcblxudmFyIF9FeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoXCJmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudFwiKTtcblxudmFyIF9pbnZhcmlhbnQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJmYmpzL2xpYi9pbnZhcmlhbnRcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKipcbiAqIENvcHlyaWdodCAoYykgTmljb2xhcyBHYWxsYWdoZXIuXG4gKiBDb3B5cmlnaHQgKGMpIEZhY2Vib29rLCBJbmMuIGFuZCBpdHMgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBcbiAqL1xudmFyIGRpbWVuc2lvbnMgPSB7XG4gIHdpbmRvdzoge1xuICAgIGZvbnRTY2FsZTogMSxcbiAgICBoZWlnaHQ6IDAsXG4gICAgc2NhbGU6IDEsXG4gICAgd2lkdGg6IDBcbiAgfSxcbiAgc2NyZWVuOiB7XG4gICAgZm9udFNjYWxlOiAxLFxuICAgIGhlaWdodDogMCxcbiAgICBzY2FsZTogMSxcbiAgICB3aWR0aDogMFxuICB9XG59O1xudmFyIGxpc3RlbmVycyA9IHt9O1xuXG52YXIgRGltZW5zaW9ucyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIERpbWVuc2lvbnMoKSB7fVxuXG4gIERpbWVuc2lvbnMuZ2V0ID0gZnVuY3Rpb24gZ2V0KGRpbWVuc2lvbikge1xuICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKGRpbWVuc2lvbnNbZGltZW5zaW9uXSwgXCJObyBkaW1lbnNpb24gc2V0IGZvciBrZXkgXCIgKyBkaW1lbnNpb24pO1xuICAgIHJldHVybiBkaW1lbnNpb25zW2RpbWVuc2lvbl07XG4gIH07XG5cbiAgRGltZW5zaW9ucy5zZXQgPSBmdW5jdGlvbiBzZXQoaW5pdGlhbERpbWVuc2lvbnMpIHtcbiAgICBpZiAoaW5pdGlhbERpbWVuc2lvbnMpIHtcbiAgICAgIGlmIChfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gICAgICAgICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKGZhbHNlLCAnRGltZW5zaW9ucyBjYW5ub3QgYmUgc2V0IGluIHRoZSBicm93c2VyJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoaW5pdGlhbERpbWVuc2lvbnMuc2NyZWVuICE9IG51bGwpIHtcbiAgICAgICAgICBkaW1lbnNpb25zLnNjcmVlbiA9IGluaXRpYWxEaW1lbnNpb25zLnNjcmVlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpbml0aWFsRGltZW5zaW9ucy53aW5kb3cgIT0gbnVsbCkge1xuICAgICAgICAgIGRpbWVuc2lvbnMud2luZG93ID0gaW5pdGlhbERpbWVuc2lvbnMud2luZG93O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIERpbWVuc2lvbnMuX3VwZGF0ZSA9IGZ1bmN0aW9uIF91cGRhdGUoKSB7XG4gICAgaWYgKCFfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHdpbiA9IHdpbmRvdztcbiAgICB2YXIgZG9jRWwgPSB3aW4uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgIGRpbWVuc2lvbnMud2luZG93ID0ge1xuICAgICAgZm9udFNjYWxlOiAxLFxuICAgICAgaGVpZ2h0OiBkb2NFbC5jbGllbnRIZWlnaHQsXG4gICAgICBzY2FsZTogd2luLmRldmljZVBpeGVsUmF0aW8gfHwgMSxcbiAgICAgIHdpZHRoOiBkb2NFbC5jbGllbnRXaWR0aFxuICAgIH07XG4gICAgZGltZW5zaW9ucy5zY3JlZW4gPSB7XG4gICAgICBmb250U2NhbGU6IDEsXG4gICAgICBoZWlnaHQ6IHdpbi5zY3JlZW4uaGVpZ2h0LFxuICAgICAgc2NhbGU6IHdpbi5kZXZpY2VQaXhlbFJhdGlvIHx8IDEsXG4gICAgICB3aWR0aDogd2luLnNjcmVlbi53aWR0aFxuICAgIH07XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0ZW5lcnNbJ2NoYW5nZSddKSkge1xuICAgICAgbGlzdGVuZXJzWydjaGFuZ2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVyKGRpbWVuc2lvbnMpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIERpbWVuc2lvbnMuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgaGFuZGxlcikge1xuICAgIGxpc3RlbmVyc1t0eXBlXSA9IGxpc3RlbmVyc1t0eXBlXSB8fCBbXTtcbiAgICBsaXN0ZW5lcnNbdHlwZV0ucHVzaChoYW5kbGVyKTtcbiAgfTtcblxuICBEaW1lbnNpb25zLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0ZW5lcnNbdHlwZV0pKSB7XG4gICAgICBsaXN0ZW5lcnNbdHlwZV0gPSBsaXN0ZW5lcnNbdHlwZV0uZmlsdGVyKGZ1bmN0aW9uIChfaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gX2hhbmRsZXIgIT09IGhhbmRsZXI7XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIERpbWVuc2lvbnM7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IERpbWVuc2lvbnM7XG5cbmlmIChfRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIERpbWVuc2lvbnMuX3VwZGF0ZSgpO1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBEaW1lbnNpb25zLl91cGRhdGUsIGZhbHNlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzLmRlZmF1bHQ7Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxPQUFPLENBQUNDLFVBQVUsR0FBRyxJQUFJO0FBQ3pCRCxPQUFPLENBQUNFLE9BQU8sR0FBRyxLQUFLLENBQUM7QUFFeEIsSUFBSUMscUJBQXFCLEdBQUdDLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUVwRSxJQUFJQyxVQUFVLEdBQUdDLHNCQUFzQixDQUFDRixPQUFPLENB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